!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){},function(e,t,n){"use strict";n.r(t);n(0);var r=(e,t="metric")=>fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${e}&units=${t}&appid=8a480d014fa9dd3c95d8fbf4531869d3`).then(e=>e.json()).then(e=>e.cod&&400===e.cod?e.message:e);function i(e){return e>9?e:`0${e}`}var c=e=>{const t=new Date(e),n=i(t.getDate()),r=i(t.getMonth()+1),c=i(t.getHours()),s=i(t.getMinutes());return`${n}/${r}/${t.getFullYear()} ${c}:${s}`};var s=e=>`<img class="weather-img"\n  src="http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png" \n  alt="${e.weather[0].description}" title="${e.weather[0].description}">`;var o=e=>{const t=document.querySelector(".table-wrap");t.innerHTML="";const n=document.createElement("table");n.className="table",t.appendChild(n);const r=document.querySelectorAll(".filters input[type=checkbox]");let i={};r.forEach(e=>{i[e.id]=e.checked});const o=[];for(const e in i)if(i.hasOwnProperty(e)&&!0===i[e]){const t=e;o.push(t)}!function(e){const t=document.createElement("thead"),r=document.createElement("tr");r.innerHTML='\n    <th>Date/Time</th>\n    <th class="weather">Weather</th>',e.forEach(e=>{const t=document.createElement("th");switch(t.className=e,e){case"temperature":t.innerHTML="Temperature";break;case"max-temp":t.innerHTML="Max Temp.";break;case"min-temp":t.innerHTML="Min Temp.";break;case"pressure":t.innerHTML="Pressure";break;case"humidity":t.innerHTML="Humidity";break;case"feels-like":t.innerHTML="Feels like"}r.appendChild(t)}),t.appendChild(r),n.appendChild(t)}(o);const a=document.createElement("tbody");n.appendChild(a),a.innerHTML="",e.forEach(e=>function(e,t){const n=c(e.dt_txt),r=s(e),i=e.main.temp,o=e.main.temp_max,u=e.main.temp_min,l=e.main.pressure,d=e.main.humidity,m=e.main.feels_like,h=document.createElement("tr");h.innerHTML=`\n    <td>${n}</td>\n    <td class="weather">${r}</td>`,t.forEach(e=>{const t=document.createElement("td");switch(t.className=e,t.innerHTML=e,e){case"temperature":t.innerHTML=i;break;case"max-temp":t.innerHTML=o;break;case"min-temp":t.innerHTML=u;break;case"pressure":t.innerHTML=l;break;case"humidity":t.innerHTML=d;break;case"feels-like":t.innerHTML=m}h.appendChild(t)}),a.appendChild(h)}(e,o))};var a=e=>{document.querySelector(".city_title").innerText=e.city.name,document.querySelector("#latitude").innerText=e.city.coord.lat,document.querySelector("#longitude").innerText=e.city.coord.lon};var u=e=>{const t=document.querySelector(".error");if(0!==e.message)return t.innerText=e.message,void(t.style.opacity=1);t.style.opacity=0;const n=e;a(n),o(n.list)};var l=e=>{const t=e.target,n=document.querySelector(".error");0===t.value.length?(n.innerText="the field must not be empty",n.style.opacity=1):n.style.opacity=0};var d=class{constructor(){this.units="metric"}getUnits(){const e=document.querySelector("#units");return e&&e.checked?this.units="imperial":this.units="metric",console.log("this.units: ",this.units),this.units}setUnits(){const e=document.querySelector("#units");e&&!e.checked?this.units="imperial":this.units="metric";const t=document.querySelector("#city");return r(t.value,this.units).then(u),this.units}};var m=class{constructor(){this.filters={}}getFilters(){return document.querySelectorAll(".filters input[type=checkbox]").forEach(e=>{this.filters[e.id]=e.checked}),this.filters}setFilters(e){this.filters[e.id]=e.checked;const t=document.querySelectorAll(`th.${e.id}, td.${e.id}`);e.checked?t.forEach(e=>e.style.display="table-cell"):t.forEach(e=>e.style.display="none");const n=(new d).getUnits(),i=document.querySelector("#city");return r(i.value,n).then(u),this.filters}};document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#city");e.addEventListener("input",l);const t=new m;t.getFilters(),document.querySelectorAll(".filters input[type=checkbox]").forEach(e=>{e.addEventListener("change",e=>{t.setFilters(e.target)})});const n=new d;document.querySelector(".toggleCheck_switch").addEventListener("click",n.setUnits),document.querySelector(".form").addEventListener("submit",()=>{event.preventDefault();const t=n.getUnits();r(e.value,t).then(u)})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZ2V0V2VhdGhlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWJsZS9mb3JtYXREYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYmxlL2dldEljb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFibGUvcmVuZGVyVGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcmVuZGVyQ2l0eS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy93ZWF0aGVySGFuZGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9mb3JtL3Nob3dFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zd2l0Y2hlci9zd2l0Y2hlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9maWx0ZXJzL2ZpbHRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRXZWF0aGVyIiwiY2l0eSIsInVuaXRzIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwicmVzdWx0IiwiY29kIiwibWVzc2FnZSIsImZvcm1hdE51bWJlciIsIm51bWJlciIsImZvcm1hdERhdGVBbmRUaW1lIiwiZGF0YSIsIm5ld0RhdGUiLCJEYXRlIiwiZGF0ZSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwiaG91ciIsImdldEhvdXJzIiwibWludXRlcyIsImdldE1pbnV0ZXMiLCJnZXRGdWxsWWVhciIsImdldEljb24iLCJ3ZWF0aGVyIiwiaWNvbiIsImRlc2NyaXB0aW9uIiwicmVuZGVyVGFibGUiLCJsaXN0IiwidGFibGVTZWN0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwidGFibGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJmaWx0ZXJzQ2hlY2JveGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImZpbHRlcnMiLCJmb3JFYWNoIiwiY2hlY2tib3giLCJpZCIsImNoZWNrZWQiLCJmaWx0ZXJzVHJ1ZSIsImZpbHRlciIsInB1c2giLCJ0aGVhZCIsInRyIiwidGgiLCJyZW5kZXJUaGVhZCIsInRib2R5IiwiZWxlbWVudCIsImVsZW0iLCJkdF90eHQiLCJ0ZW1wZXJhdHVyZSIsIm1haW4iLCJ0ZW1wIiwibWF4VGVtcCIsInRlbXBfbWF4IiwibWluVGVtcCIsInRlbXBfbWluIiwicHJlc3N1cmUiLCJodW1pZGl0eSIsImZlZWxzTGlrZSIsImZlZWxzX2xpa2UiLCJ0ZCIsInJlbmRlclJvd3MiLCJyZW5kZXJDaXR5IiwiaW5uZXJUZXh0IiwiY29vcmQiLCJsYXQiLCJsb24iLCJ3ZWF0aGVySGFuZGxlciIsIndlYXRoZXJEYXRhIiwiZXJyb3IiLCJzdHlsZSIsIm9wYWNpdHkiLCJzaG93RXJyb3IiLCJldmVudCIsInRhcmdldCIsImxlbmd0aCIsIlN3aXRjaGVyIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiZ2V0VW5pdHMiLCJjb25zb2xlIiwibG9nIiwic2V0VW5pdHMiLCJjaXR5SW5wdXQiLCJGaWx0ZXJzIiwiZ2V0RmlsdGVycyIsInNldEZpbHRlcnMiLCJjZWxsc0luQ29sdW1uIiwiZGlzcGxheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzd2l0Y2hlciIsInByZXZlbnREZWZhdWx0Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1L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ckMsUUFDVGtELEVBQWNyRCxRQUFRMEIsR0FBTUEsRUFBR1UsTUFBTWtCLFFBQVUsY0FFL0NELEVBQWNyRCxRQUFRMEIsR0FBTUEsRUFBR1UsTUFBTWtCLFFBQVUsUUFJakQsTUFDTTlGLEdBRFcsSUFBSWtGLEdBQ0VHLFdBR2pCSSxFQUFZM0QsU0FBU0MsY0FBYyxTQUl6QyxPQUhnQmpDLEVBQVcyRixFQUFVMUcsTUFBT2lCLEdBQ3BDRSxLQUFLdUUsR0FFTlcsS0FBSzdDLFVDL0JoQlQsU0FBU2lFLGlCQUFpQixtQkFBb0IsS0FHNUMsTUFBTU4sRUFBWTNELFNBQVNDLGNBQWMsU0FDekMwRCxFQUFVTSxpQkFBaUIsUUFBU2pCLEdBSXBDLE1BQU12QyxFQUFVLElBQUltRCxFQUNwQm5ELEVBQVFvRCxhQUVpQjdELFNBQVNRLGlCQUFpQixpQ0FDbENFLFFBQVFDLElBQ3ZCQSxFQUFTc0QsaUJBQWlCLFNBQVVoQixJQUNsQ3hDLEVBQVFxRCxXQUFXYixFQUFNQyxZQU03QixNQUFNZ0IsRUFBVyxJQUFJZCxFQUVFcEQsU0FBU0MsY0FBYyx1QkFDL0JnRSxpQkFBaUIsUUFBU0MsRUFBU1IsVUFJckMxRCxTQUFTQyxjQUFjLFNBQy9CZ0UsaUJBQWlCLFNBQVUsS0FDOUJoQixNQUFNa0IsaUJBQ04sTUFBTWpHLEVBQVFnRyxFQUFTWCxXQUVQdkYsRUFBVzJGLEVBQVUxRyxNQUFPaUIsR0FDcENFLEtBQUt1RSIsImZpbGUiOiJqcy9tYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiLyoqXHJcbiAqIEZldGNoIGRhdGEgZnJvbSBBUEkgYW5kIHJldHVybiBKU09OXHJcbiAqIFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY2l0eSBuYW1lXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1bml0cyBcclxuICovXHJcbmNvbnN0IGdldFdlYXRoZXIgPSAoY2l0eSwgdW5pdHMgPSAnbWV0cmljJykgPT4ge1xyXG5cclxuICBjb25zdCBvcGVuV2VhdGhlckFwaUtleSA9ICc4YTQ4MGQwMTRmYTlkZDNjOTVkOGZiZjQ1MzE4NjlkMyc7IC8vINC80L7QuSDQutC70Y7Rh1xyXG4gIGNvbnN0IHdlYXRoZXJBcGlMaW5rID0gYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD9xPSR7Y2l0eX0mdW5pdHM9JHt1bml0c30mYXBwaWQ9JHtvcGVuV2VhdGhlckFwaUtleX1gO1xyXG5cclxuICByZXR1cm4gZmV0Y2god2VhdGhlckFwaUxpbmspXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICBpZiAocmVzdWx0LmNvZCAmJiByZXN1bHQuY29kID09PSA0MDApIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0Lm1lc3NhZ2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZ2V0V2VhdGhlcjsiLCJjb25zdCBmb3JtYXREYXRlQW5kVGltZSA9IGRhdGEgPT4ge1xyXG5cclxuICBjb25zdCBuZXdEYXRlID0gbmV3IERhdGUoZGF0YSk7XHJcblxyXG4gIGNvbnN0IGRhdGUgPSBmb3JtYXROdW1iZXIobmV3RGF0ZS5nZXREYXRlKCkpO1xyXG4gIGNvbnN0IG1vbnRoID0gZm9ybWF0TnVtYmVyKG5ld0RhdGUuZ2V0TW9udGgoKSArIDEpO1xyXG4gIGNvbnN0IGhvdXIgPSBmb3JtYXROdW1iZXIobmV3RGF0ZS5nZXRIb3VycygpKTtcclxuICBjb25zdCBtaW51dGVzID0gZm9ybWF0TnVtYmVyKG5ld0RhdGUuZ2V0TWludXRlcygpKTtcclxuXHJcbiAgcmV0dXJuIGAke2RhdGV9LyR7bW9udGh9LyR7bmV3RGF0ZS5nZXRGdWxsWWVhcigpfSAke2hvdXJ9OiR7bWludXRlc31gO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0TnVtYmVyKG51bWJlcikge1xyXG4gIHJldHVybiBudW1iZXIgPiA5ID8gbnVtYmVyIDogYDAke251bWJlcn1gO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmb3JtYXREYXRlQW5kVGltZTsiLCJjb25zdCBnZXRJY29uID0gZGF0YSA9PiBgPGltZyBjbGFzcz1cIndlYXRoZXItaW1nXCJcclxuICBzcmM9XCJodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93bi8ke2RhdGEud2VhdGhlclswXS5pY29ufUAyeC5wbmdcIiBcclxuICBhbHQ9XCIke2RhdGEud2VhdGhlclswXS5kZXNjcmlwdGlvbn1cIiB0aXRsZT1cIiR7ZGF0YS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9ufVwiPmA7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBnZXRJY29uOyIsImltcG9ydCBmb3JtYXREYXRlQW5kVGltZSBmcm9tIFwiLi9mb3JtYXREYXRlXCI7XHJcbmltcG9ydCBnZXRJY29uIGZyb20gJy4vZ2V0SWNvbic7XHJcblxyXG5jb25zdCByZW5kZXJUYWJsZSA9IChsaXN0KSA9PiB7XHJcbiBcclxuICAvKiBjbGVhciB0YWJsZSB3cmFwcGVyICovXHJcbiAgY29uc3QgdGFibGVTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhYmxlLXdyYXAnKTtcclxuICB0YWJsZVNlY3Rpb24uaW5uZXJIVE1MID0gJyc7ICAvLyBjbGVhciB0YWJsZSBzZWN0aW9uXHJcblxyXG4gIC8qIGNyZWF0ZSBuZXcgdGFibGUgKi9cclxuICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XHJcbiAgdGFibGUuY2xhc3NOYW1lID0gJ3RhYmxlJztcclxuICB0YWJsZVNlY3Rpb24uYXBwZW5kQ2hpbGQodGFibGUpOyBcclxuXHJcblxyXG5cclxuICAvKiBjcmVhdGUgZmlsdGVycyBvYmplY3QgKi9cclxuICBjb25zdCBmaWx0ZXJzQ2hlY2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpbHRlcnMgaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcclxuICBsZXQgZmlsdGVycyA9IHt9O1xyXG4gIGZpbHRlcnNDaGVjYm94ZXMuZm9yRWFjaChjaGVja2JveCA9PiB7XHJcbiAgICBmaWx0ZXJzW2NoZWNrYm94LmlkXSA9IGNoZWNrYm94LmNoZWNrZWQ7XHJcbiAgfSk7XHJcblxyXG4gIC8qIGNyZWF0ZSBhbiBhcnJheSBvZiBmaWx0ZXJzIHdob3NlIHN0YXR1cyBpcyB0cnVlICovXHJcbiAgY29uc3QgZmlsdGVyc1RydWUgPSBbXVxyXG4gIGZvciAoY29uc3Qga2V5IGluIGZpbHRlcnMpIHtcclxuICAgIGlmIChmaWx0ZXJzLmhhc093blByb3BlcnR5KGtleSkgJiYgZmlsdGVyc1trZXldID09PSB0cnVlKSB7XHJcbiAgICAgIGNvbnN0IGZpbHRlciA9IGtleTtcclxuICAgICAgZmlsdGVyc1RydWUucHVzaChmaWx0ZXIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyVGhlYWQoZmlsdGVyc1RydWUpO1xyXG5cclxuICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XHJcbiAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xyXG4gIHRib2R5LmlubmVySFRNTCA9ICcnO1xyXG5cclxuICBsaXN0LmZvckVhY2goZWxlbWVudCA9PiByZW5kZXJSb3dzKGVsZW1lbnQsIGZpbHRlcnNUcnVlKSk7XHJcblxyXG5cclxuXHJcbiAgLyogY3JlYXRlIGFuZCBmaWxsIHRoZWFkIHdpdGggZmlsdGVycyAqL1xyXG4gIGZ1bmN0aW9uIHJlbmRlclRoZWFkKGZpbHRlcnNUcnVlKSB7XHJcblxyXG4gICAgY29uc3QgdGhlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aGVhZCcpO1xyXG5cclxuICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgIHRyLmlubmVySFRNTCA9IGBcclxuICAgIDx0aD5EYXRlL1RpbWU8L3RoPlxyXG4gICAgPHRoIGNsYXNzPVwid2VhdGhlclwiPldlYXRoZXI8L3RoPmA7XHJcblxyXG4gICAgZmlsdGVyc1RydWUuZm9yRWFjaChmaWx0ZXIgPT4ge1xyXG5cclxuICAgICAgY29uc3QgdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpO1xyXG4gICAgICB0aC5jbGFzc05hbWUgPSBmaWx0ZXI7XHJcblxyXG4gICAgICBzd2l0Y2ggKGZpbHRlcikge1xyXG4gICAgICAgIGNhc2UgJ3RlbXBlcmF0dXJlJzpcclxuICAgICAgICAgIHRoLmlubmVySFRNTCA9ICdUZW1wZXJhdHVyZSc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdtYXgtdGVtcCc6XHJcbiAgICAgICAgICB0aC5pbm5lckhUTUwgPSAnTWF4IFRlbXAuJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ21pbi10ZW1wJzpcclxuICAgICAgICAgIHRoLmlubmVySFRNTCA9ICdNaW4gVGVtcC4nO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncHJlc3N1cmUnOlxyXG4gICAgICAgICAgdGguaW5uZXJIVE1MID0gJ1ByZXNzdXJlJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2h1bWlkaXR5JzpcclxuICAgICAgICAgIHRoLmlubmVySFRNTCA9ICdIdW1pZGl0eSc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdmZWVscy1saWtlJzpcclxuICAgICAgICAgIHRoLmlubmVySFRNTCA9ICdGZWVscyBsaWtlJztcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgdHIuYXBwZW5kQ2hpbGQodGgpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRoZWFkLmFwcGVuZENoaWxkKHRyKTtcclxuICAgIHRhYmxlLmFwcGVuZENoaWxkKHRoZWFkKTtcclxuICB9XHJcblxyXG5cclxuICAvKiBjcmVhdGUgYW5kIGZpbGwgcm93cyBpbiB0Ym9keSB3aXRoIGZpbHRlcnMgKi9cclxuICBmdW5jdGlvbiByZW5kZXJSb3dzKGVsZW0sIGZpbHRlcnNUcnVlKSB7XHJcblxyXG4gICAgY29uc3QgZGF0ZSA9IGZvcm1hdERhdGVBbmRUaW1lKGVsZW0uZHRfdHh0KTtcclxuICAgIGNvbnN0IGljb24gPSBnZXRJY29uKGVsZW0pO1xyXG4gICAgY29uc3QgdGVtcGVyYXR1cmUgPSBlbGVtLm1haW4udGVtcDtcclxuICAgIGNvbnN0IG1heFRlbXAgPSBlbGVtLm1haW4udGVtcF9tYXg7XHJcbiAgICBjb25zdCBtaW5UZW1wID0gZWxlbS5tYWluLnRlbXBfbWluO1xyXG4gICAgY29uc3QgcHJlc3N1cmUgPSBlbGVtLm1haW4ucHJlc3N1cmU7XHJcbiAgICBjb25zdCBodW1pZGl0eSA9IGVsZW0ubWFpbi5odW1pZGl0eTtcclxuICAgIGNvbnN0IGZlZWxzTGlrZSA9IGVsZW0ubWFpbi5mZWVsc19saWtlO1xyXG5cclxuXHJcbiAgICAvLyBjcmVhdGUgbmV3IHRhYmxlIHJvd1xyXG4gICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgdHIuaW5uZXJIVE1MID0gYFxyXG4gICAgPHRkPiR7ZGF0ZX08L3RkPlxyXG4gICAgPHRkIGNsYXNzPVwid2VhdGhlclwiPiR7aWNvbn08L3RkPmA7XHJcblxyXG5cclxuICAgIGZpbHRlcnNUcnVlLmZvckVhY2goZmlsdGVyID0+IHtcclxuXHJcbiAgICAgIGNvbnN0IHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgICAgdGQuY2xhc3NOYW1lID0gZmlsdGVyO1xyXG4gICAgICB0ZC5pbm5lckhUTUwgPSBmaWx0ZXI7XHJcbiAgICAgIFxyXG4gICAgICBzd2l0Y2ggKGZpbHRlcikge1xyXG4gICAgICAgIGNhc2UgJ3RlbXBlcmF0dXJlJzpcclxuICAgICAgICAgIHRkLmlubmVySFRNTCA9IHRlbXBlcmF0dXJlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnbWF4LXRlbXAnOlxyXG4gICAgICAgICAgdGQuaW5uZXJIVE1MID0gbWF4VGVtcDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ21pbi10ZW1wJzpcclxuICAgICAgICAgIHRkLmlubmVySFRNTCA9IG1pblRlbXA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdwcmVzc3VyZSc6XHJcbiAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBwcmVzc3VyZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2h1bWlkaXR5JzpcclxuICAgICAgICAgIHRkLmlubmVySFRNTCA9IGh1bWlkaXR5O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnZmVlbHMtbGlrZSc6XHJcbiAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBmZWVsc0xpa2U7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0ci5hcHBlbmRDaGlsZCh0ZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcmVuZGVyVGFibGU7IiwiLyoqXHJcbiAqIHNob3cgY2l0eSwgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZVxyXG4gKiBAcGFyYW0ge2pzb259IGRhdGEgZnJvbSBBUElcclxuICovXHJcbmNvbnN0IHJlbmRlckNpdHkgPSBkYXRhID0+IHtcclxuXHJcbiAgY29uc3QgY2l0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaXR5X3RpdGxlJyk7XHJcbiAgY2l0eS5pbm5lclRleHQgPSBkYXRhLmNpdHkubmFtZTtcclxuXHJcbiAgY29uc3QgbGF0aXR1ZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGF0aXR1ZGUnKTtcclxuICBsYXRpdHVkZS5pbm5lclRleHQgPSBkYXRhLmNpdHkuY29vcmQubGF0O1xyXG5cclxuICBjb25zdCBsb25naXR1ZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9uZ2l0dWRlJyk7XHJcbiAgbG9uZ2l0dWRlLmlubmVyVGV4dCA9IGRhdGEuY2l0eS5jb29yZC5sb247XHJcbiAgXHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IHJlbmRlckNpdHk7IiwiaW1wb3J0IHJlbmRlclRhYmxlIGZyb20gXCIuL3RhYmxlL3JlbmRlclRhYmxlXCI7XHJcbmltcG9ydCByZW5kZXJDaXR5IGZyb20gXCIuL3JlbmRlckNpdHlcIjtcclxuXHJcbi8qKlxyXG4gKiBTaG93IGVycm9yIG1lc3NhZ2UsIGNpdHkgZGF0YSBhbmQgcmVuZGVyIHdlYXRoZXIgdGFibGVcclxuICogQHBhcmFtIHtqc29ufSB3ZWF0aGVyRGF0YSBmcm9tIEFQSVxyXG4gKi9cclxuY29uc3Qgd2VhdGhlckhhbmRsZXIgPSB3ZWF0aGVyRGF0YSA9PiB7XHJcblxyXG4gIC8qIHNob3cgZXJyb3IgbWVzc2FnZSBpZiBBUEkgcmV0dXJuIGVycm9yICovXHJcbiAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXJyb3InKTtcclxuICBpZiAod2VhdGhlckRhdGEubWVzc2FnZSAhPT0gMCkge1xyXG4gICAgZXJyb3IuaW5uZXJUZXh0ID0gd2VhdGhlckRhdGEubWVzc2FnZTtcclxuICAgIGVycm9yLnN0eWxlLm9wYWNpdHkgPSAxO1xyXG4gICAgcmV0dXJuO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBlcnJvci5zdHlsZS5vcGFjaXR5ID0gMDtcclxuICB9XHJcblxyXG4gIGNvbnN0IGRhdGEgPSB3ZWF0aGVyRGF0YTtcclxuICBcclxuICByZW5kZXJDaXR5KGRhdGEpO1xyXG4gIHJlbmRlclRhYmxlKGRhdGEubGlzdCk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB3ZWF0aGVySGFuZGxlcjsiLCJjb25zdCBzaG93RXJyb3IgPSBldmVudCA9PiB7XHJcblxyXG4gIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuICBjb25zdCBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvcicpO1xyXG5cclxuICBpZiAodGFyZ2V0LnZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgZXJyb3IuaW5uZXJUZXh0ID0gJ3RoZSBmaWVsZCBtdXN0IG5vdCBiZSBlbXB0eSc7XHJcbiAgICBlcnJvci5zdHlsZS5vcGFjaXR5ID0gMTtcclxuICB9IGVsc2Uge1xyXG4gICAgZXJyb3Iuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgfVxyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBzaG93RXJyb3I7IiwiaW1wb3J0IGdldFdlYXRoZXIgZnJvbSBcIi4uL2dldFdlYXRoZXJcIjtcclxuaW1wb3J0IHdlYXRoZXJIYW5kbGVyIGZyb20gXCIuLi93ZWF0aGVySGFuZGxlclwiO1xyXG5cclxuY2xhc3MgU3dpdGNoZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy51bml0cyA9ICdtZXRyaWMnO1xyXG4gIH1cclxuXHJcbiAgZ2V0VW5pdHMoKSB7XHJcbiAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1bml0cycpO1xyXG4gICAgaWYgKGNoZWNrYm94ICYmIGNoZWNrYm94LmNoZWNrZWQpIHtcclxuICAgICAgdGhpcy51bml0cyA9ICdpbXBlcmlhbCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnVuaXRzID0gJ21ldHJpYyc7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygndGhpcy51bml0czogJywgdGhpcy51bml0cyk7XHJcbiAgICByZXR1cm4gdGhpcy51bml0cztcclxuICB9XHJcblxyXG4gIHNldFVuaXRzKCkge1xyXG4gICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdW5pdHMnKTtcclxuICAgIC8vIGNsaWNrIGNoZWNraW5nIHVudXRzXHJcbiAgICBpZiAoY2hlY2tib3ggJiYgIWNoZWNrYm94LmNoZWNrZWQpIHtcclxuICAgICAgdGhpcy51bml0cyA9ICdpbXBlcmlhbCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnVuaXRzID0gJ21ldHJpYyc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0IGRhdGEgQVBJIGFuZCByZW5kZXIgcmVzdWx0XHJcbiAgICBjb25zdCBjaXR5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2l0eScpO1xyXG4gICAgY29uc3Qgd2VhdGhlciA9IGdldFdlYXRoZXIoY2l0eUlucHV0LnZhbHVlLCB0aGlzLnVuaXRzKTtcclxuICAgIHdlYXRoZXIudGhlbih3ZWF0aGVySGFuZGxlcik7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMudW5pdHM7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTd2l0Y2hlcjsiLCJpbXBvcnQgZ2V0V2VhdGhlciBmcm9tIFwiLi4vZ2V0V2VhdGhlclwiO1xyXG5pbXBvcnQgd2VhdGhlckhhbmRsZXIgZnJvbSBcIi4uL3dlYXRoZXJIYW5kbGVyXCI7XHJcbmltcG9ydCBTd2l0Y2hlciBmcm9tIFwiLi4vc3dpdGNoZXIvc3dpdGNoZXJcIjtcclxuXHJcbmNsYXNzIEZpbHRlcnMge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5maWx0ZXJzID0ge307XHJcbiAgfVxyXG4gIFxyXG5cclxuICBnZXRGaWx0ZXJzKCkge1xyXG4gICAgY29uc3QgZmlsdGVyc0NoZWNib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzIGlucHV0W3R5cGU9Y2hlY2tib3hdJyk7XHJcbiAgICBmaWx0ZXJzQ2hlY2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG4gICAgICB0aGlzLmZpbHRlcnNbY2hlY2tib3guaWRdID0gY2hlY2tib3guY2hlY2tlZDtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuZmlsdGVycztcclxuICB9XHJcblxyXG4gIHNldEZpbHRlcnModGFyZ2V0KSB7XHJcbiAgICB0aGlzLmZpbHRlcnNbdGFyZ2V0LmlkXSA9IHRhcmdldC5jaGVja2VkO1xyXG5cclxuICAgIGNvbnN0IGNlbGxzSW5Db2x1bW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGB0aC4ke3RhcmdldC5pZH0sIHRkLiR7dGFyZ2V0LmlkfWApO1xyXG5cclxuICAgIGlmICh0YXJnZXQuY2hlY2tlZCkge1xyXG4gICAgICBjZWxsc0luQ29sdW1uLmZvckVhY2godGQgPT4gdGQuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1jZWxsJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjZWxsc0luQ29sdW1uLmZvckVhY2godGQgPT4gdGQuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyogY2hlY2sgdW5pdHMgKi9cclxuICAgIGNvbnN0IHN3aXRjaGVyID0gbmV3IFN3aXRjaGVyKCk7XHJcbiAgICBjb25zdCB1bml0cyA9IHN3aXRjaGVyLmdldFVuaXRzKCk7XHJcblxyXG4gICAgLyogZ2V0IGRhdGEgKi9cclxuICAgIGNvbnN0IGNpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaXR5Jyk7XHJcbiAgICBjb25zdCB3ZWF0aGVyID0gZ2V0V2VhdGhlcihjaXR5SW5wdXQudmFsdWUsIHVuaXRzKTtcclxuICAgIHdlYXRoZXIudGhlbih3ZWF0aGVySGFuZGxlcik7XHJcbiAgICBcclxuICAgIHJldHVybiB0aGlzLmZpbHRlcnM7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGaWx0ZXJzOyIsImltcG9ydCAnLi9zY3NzL3N0eWxlLnNjc3MnO1xyXG5pbXBvcnQgZ2V0V2VhdGhlciBmcm9tICcuL2NvbXBvbmVudHMvZ2V0V2VhdGhlcic7XHJcbmltcG9ydCB3ZWF0aGVySGFuZGxlciBmcm9tICcuL2NvbXBvbmVudHMvd2VhdGhlckhhbmRsZXInO1xyXG5pbXBvcnQgc2hvd0Vycm9yIGZyb20gJy4vY29tcG9uZW50cy9mb3JtL3Nob3dFcnJvcic7XHJcbmltcG9ydCBGaWx0ZXJzIGZyb20gJy4vY29tcG9uZW50cy9maWx0ZXJzL2ZpbHRlcnMnO1xyXG5pbXBvcnQgU3dpdGNoZXIgZnJvbSAnLi9jb21wb25lbnRzL3N3aXRjaGVyL3N3aXRjaGVyJztcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcblxyXG4gIC8vIFNob3cgZXJyb3IgaWYgaW5wdXQgYXJlIGVtcHR5XHJcbiAgY29uc3QgY2l0eUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NpdHknKTtcclxuICBjaXR5SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBzaG93RXJyb3IpO1xyXG5cclxuICBcclxuICAvLyBmaWx0ZXJzXHJcbiAgY29uc3QgZmlsdGVycyA9IG5ldyBGaWx0ZXJzKCk7XHJcbiAgZmlsdGVycy5nZXRGaWx0ZXJzKCk7XHJcblxyXG4gIGNvbnN0IGZpbHRlcnNDaGVjYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVycyBpbnB1dFt0eXBlPWNoZWNrYm94XScpO1xyXG4gIGZpbHRlcnNDaGVjYm94ZXMuZm9yRWFjaChjaGVja2JveCA9PiB7XHJcbiAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBldmVudCA9PiB7XHJcbiAgICAgIGZpbHRlcnMuc2V0RmlsdGVycyhldmVudC50YXJnZXQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG5cclxuICAvLyBldmVudCB0b2dnbGUgc3dpdGNoZXJcclxuICBjb25zdCBzd2l0Y2hlciA9IG5ldyBTd2l0Y2hlcigpO1xyXG5cclxuICBjb25zdCBzd2l0Y2hlckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2dnbGVDaGVja19zd2l0Y2gnKTtcclxuICBzd2l0Y2hlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN3aXRjaGVyLnNldFVuaXRzKTtcclxuXHJcblxyXG4gIC8vIGV2ZW50IHN1Ym1pdCBmb3JtXHJcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoKSA9PiB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgdW5pdHMgPSBzd2l0Y2hlci5nZXRVbml0cygpO1xyXG5cclxuICAgIGNvbnN0IHdlYXRoZXIgPSBnZXRXZWF0aGVyKGNpdHlJbnB1dC52YWx1ZSwgdW5pdHMpO1xyXG4gICAgd2VhdGhlci50aGVuKHdlYXRoZXJIYW5kbGVyKTtcclxuICB9KTtcclxuXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=