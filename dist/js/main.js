!function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(r,c,function(t){return e[t]}.bind(null,c));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){},function(e,t,n){"use strict";n.r(t);n(0);var r=(e,t="metric")=>fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${e}&units=${t}&appid=a71cbacce1b2b9aa059f27a00094c380`).then(e=>e.json()).then(e=>e.cod&&400===e.cod?e.message:e);function c(e){return e>9?e:`0${e}`}var a=e=>{const t=new Date(e),n=c(t.getDate()),r=c(t.getMonth()+1),a=c(t.getHours()),o=c(t.getMinutes());return`${n}/${r}/${t.getFullYear()} ${a}:${o}`};var o=e=>{const t=document.querySelector(".table-wrap");t.innerHTML="";const n=document.createElement("table");n.className="table",t.appendChild(n);const r=document.querySelector(".filters").querySelectorAll("input[type=checkbox]");let c={};r.forEach(e=>{c[e.id]=e.checked});const o=[];for(const e in c)if(c.hasOwnProperty(e)&&!0===c[e]){const t=e;o.push(t)}!function(e){const t=document.createElement("thead"),r=document.createElement("tr");r.innerHTML='\n    <th>Date/Time</th>\n    <th class="weather">Weather</th>',e.forEach(e=>{const t=document.createElement("th");switch(t.className=e,e){case"temperature":t.innerHTML="Temperature";break;case"max-temp":t.innerHTML="Max Temp.";break;case"min-temp":t.innerHTML="Min Temp.";break;case"pressure":t.innerHTML="Pressure";break;case"humidity":t.innerHTML="Humidity";break;case"feels-like":t.innerHTML="Feels like"}r.appendChild(t)}),t.appendChild(r),n.appendChild(t)}(o);const i=document.createElement("tbody");n.appendChild(i),i.innerHTML="",e.forEach(e=>function(e,t){const n=a(e.dt_txt),r=`<img class="weather-img"\n    src="http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png" \n    alt="${e.weather[0].description}" title="${e.weather[0].description}">`,c=e.main.temp,o=e.main.temp_max,l=e.main.temp_min,u=e.main.pressure,s=e.main.humidity,d=e.main.feels_like,m=document.createElement("tr");m.innerHTML=`\n    <td>${n}</td>\n    <td class="weather">${r}</td>`,t.forEach(e=>{const t=document.createElement("td");switch(t.className=e,t.innerHTML=e,e){case"temperature":t.innerHTML=c;break;case"max-temp":t.innerHTML=o;break;case"min-temp":t.innerHTML=l;break;case"pressure":t.innerHTML=u;break;case"humidity":t.innerHTML=s;break;case"feels-like":t.innerHTML=d}m.appendChild(t)}),i.appendChild(m)}(e,o))};var i=()=>{const e=document.querySelector(".toggleCheck_switch"),t=document.querySelector("#units");let n="";return n=t&&t.checked?"imperial":"metric",e.addEventListener("click",()=>{n=t&&!t.checked?"imperial":"metric";const e=document.querySelector("#city");r(e.value,n).then(u)}),n};var l=e=>{const t=e.target,n=document.querySelectorAll(`th.${t.id}, td.${t.id}`);t.checked?n.forEach(e=>e.style.display="table-cell"):n.forEach(e=>e.style.display="none");const c=i(),a=document.querySelector("#city");r(a.value,c).then(u)};var u=e=>{const t=document.querySelector(".error");if(0!==e.message)return t.innerText=e.message,void(t.style.opacity=1);t.style.opacity=0;const n=e;document.querySelector(".city_title").innerText=n.city.name,document.querySelector("#latitude").innerText=n.city.coord.lat,document.querySelector("#longitude").innerText=n.city.coord.lon,o(n.list),document.querySelector(".filters").querySelectorAll("input[type=checkbox]").forEach(e=>{e.removeAttribute("disabled"),e.addEventListener("change",l)})};var s=e=>{const t=e.target,n=document.querySelector(".error");0===t.value.length?(n.innerText="the field must not be empty",n.style.opacity=1):n.style.opacity=0};document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#city");e.addEventListener("input",s),document.querySelector(".filters").querySelectorAll("input[type=checkbox]").forEach(e=>{e.addEventListener("change",l)}),document.querySelector(".form").addEventListener("submit",()=>{event.preventDefault();const t=i();r(e.value,t).then(u)}),i()})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZ2V0V2VhaGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYmxlL2Zvcm1hdERhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFibGUvcmVuZGVyVGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3dpdGNoZXIvc3dpdGNoZXJIYW5kbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2ZpbHRlcnMvZmlsdGVyc0hhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvd2VhdGhlckhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZm9ybS9zaG93RXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRXZWFoZXIiLCJjaXR5IiwidW5pdHMiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJyZXN1bHQiLCJjb2QiLCJtZXNzYWdlIiwiZm9ybWF0TnVtYmVyIiwibnVtYmVyIiwiZm9ybWF0RGF0ZUFuZFRpbWUiLCJkYXRhIiwibmV3RGF0ZSIsIkRhdGUiLCJkYXRlIiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJob3VyIiwiZ2V0SG91cnMiLCJtaW51dGVzIiwiZ2V0TWludXRlcyIsImdldEZ1bGxZZWFyIiwicmVuZGVyVGFibGUiLCJsaXN0IiwidGFibGVTZWN0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwidGFibGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJmaWx0ZXJzQ2hlY2JveGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImZpbHRlcnMiLCJmb3JFYWNoIiwiY2hlY2tib3giLCJpZCIsImNoZWNrZWQiLCJmaWx0ZXJzVHJ1ZSIsImZpbHRlciIsInB1c2giLCJ0aGVhZCIsInRyIiwidGgiLCJyZW5kZXJUaGVhZCIsInRib2R5IiwiZWxlbWVudCIsImVsZW0iLCJkdF90eHQiLCJpY29uIiwid2VhdGhlciIsImRlc2NyaXB0aW9uIiwidGVtcGVyYXR1cmUiLCJtYWluIiwidGVtcCIsIm1heFRlbXAiLCJ0ZW1wX21heCIsIm1pblRlbXAiLCJ0ZW1wX21pbiIsInByZXNzdXJlIiwiaHVtaWRpdHkiLCJmZWVsc0xpa2UiLCJmZWVsc19saWtlIiwidGQiLCJyZW5kZXJSb3dzIiwic3dpdGNoZXJIYW5kbGVyIiwic3dpdGNoZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiY2l0eUlucHV0Iiwid2VhdGhlckhhbmRsZXIiLCJmaWx0ZXJzSGFuZGxlciIsImV2ZW50IiwidGFyZ2V0IiwiY2VsbHNJbkNvbHVtbiIsInN0eWxlIiwiZGlzcGxheSIsIndlYXRoZXJEYXRhIiwiZXJyb3IiLCJpbm5lclRleHQiLCJvcGFjaXR5IiwiY29vcmQiLCJsYXQiLCJsb24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJzaG93RXJyb3IiLCJsZW5ndGgiLCJwcmV2ZW50RGVmYXVsdCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVC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QUFVLEtBQzlCSSxNQUFNZSxpQkFDTixNQUFNeEYsRUFBUW1FLElBRUVyRSxFQUFVd0UsRUFBVXZGLE1BQU9pQixHQUNuQ0UsS0FBS3FFLEtBS2ZKIiwiZmlsZSI6ImpzL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCIvKipcclxuICogRmV0Y2ggZGF0YSBmcm9tIEFQSSBhbmQgcmV0dXJuIEpTT05cclxuICogXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaXR5IG5hbWVcclxuICogQHBhcmFtIHtzdHJpbmd9IHVuaXRzIFxyXG4gKi9cclxuY29uc3QgZ2V0V2VhaGVyID0gKGNpdHksIHVuaXRzID0gJ21ldHJpYycpID0+IHtcclxuXHJcbiAgY29uc3Qgb3BlbldlYXRoZXJBcGlLZXkgPSAnYTcxY2JhY2NlMWIyYjlhYTA1OWYyN2EwMDA5NGMzODAnOyAvLyDQvNC+0Lkg0LrQu9GO0YdcclxuICBjb25zdCB3ZWF0aGVyQXBpTGluayA9IGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvZm9yZWNhc3Q/cT0ke2NpdHl9JnVuaXRzPSR7dW5pdHN9JmFwcGlkPSR7b3BlbldlYXRoZXJBcGlLZXl9YDtcclxuXHJcbiAgcmV0dXJuIGZldGNoKHdlYXRoZXJBcGlMaW5rKVxyXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgaWYgKHJlc3VsdC5jb2QgJiYgcmVzdWx0LmNvZCA9PT0gNDAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5tZXNzYWdlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdldFdlYWhlcjsiLCJjb25zdCBmb3JtYXREYXRlQW5kVGltZSA9IGRhdGEgPT4ge1xyXG5cclxuICBjb25zdCBuZXdEYXRlID0gbmV3IERhdGUoZGF0YSk7XHJcblxyXG4gIGNvbnN0IGRhdGUgPSBmb3JtYXROdW1iZXIobmV3RGF0ZS5nZXREYXRlKCkpO1xyXG4gIGNvbnN0IG1vbnRoID0gZm9ybWF0TnVtYmVyKG5ld0RhdGUuZ2V0TW9udGgoKSArIDEpO1xyXG4gIGNvbnN0IGhvdXIgPSBmb3JtYXROdW1iZXIobmV3RGF0ZS5nZXRIb3VycygpKTtcclxuICBjb25zdCBtaW51dGVzID0gZm9ybWF0TnVtYmVyKG5ld0RhdGUuZ2V0TWludXRlcygpKTtcclxuXHJcbiAgcmV0dXJuIGAke2RhdGV9LyR7bW9udGh9LyR7bmV3RGF0ZS5nZXRGdWxsWWVhcigpfSAke2hvdXJ9OiR7bWludXRlc31gO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0TnVtYmVyKG51bWJlcikge1xyXG4gIHJldHVybiBudW1iZXIgPiA5ID8gbnVtYmVyIDogYDAke251bWJlcn1gO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmb3JtYXREYXRlQW5kVGltZTsiLCJpbXBvcnQgZm9ybWF0RGF0ZUFuZFRpbWUgZnJvbSBcIi4vZm9ybWF0RGF0ZVwiO1xyXG5cclxuY29uc3QgcmVuZGVyVGFibGUgPSAobGlzdCkgPT4ge1xyXG4gXHJcbiAgLyogY2xlYXIgdGFibGUgd3JhcHBlciAqL1xyXG4gIGNvbnN0IHRhYmxlU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS13cmFwJyk7XHJcbiAgdGFibGVTZWN0aW9uLmlubmVySFRNTCA9ICcnOyAgLy8gY2xlYXIgdGFibGUgc2VjdGlvblxyXG5cclxuICAvKiBjcmVhdGUgbmV3IHRhYmxlICovXHJcbiAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xyXG4gIHRhYmxlLmNsYXNzTmFtZSA9ICd0YWJsZSc7XHJcbiAgdGFibGVTZWN0aW9uLmFwcGVuZENoaWxkKHRhYmxlKTsgXHJcblxyXG5cclxuXHJcbiAgLyogY3JlYXRlIGZpbHRlcnMgb2JqZWN0ICovXHJcbiAgY29uc3QgZmlsdGVyc0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzJyk7XHJcbiAgY29uc3QgZmlsdGVyc0NoZWNib3hlcyA9IGZpbHRlcnNEaXYucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcclxuICBsZXQgZmlsdGVycyA9IHt9XHJcbiAgZmlsdGVyc0NoZWNib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcclxuICAgIGZpbHRlcnNbY2hlY2tib3guaWRdID0gY2hlY2tib3guY2hlY2tlZDtcclxuICB9KTtcclxuXHJcbiAgLyogY3JlYXRlIGFuIGFycmF5IG9mIGZpbHRlcnMgd2hvc2Ugc3RhdHVzIGlzIHRydWUgKi9cclxuICBjb25zdCBmaWx0ZXJzVHJ1ZSA9IFtdXHJcbiAgZm9yIChjb25zdCBrZXkgaW4gZmlsdGVycykge1xyXG4gICAgaWYgKGZpbHRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBmaWx0ZXJzW2tleV0gPT09IHRydWUpIHtcclxuICAgICAgY29uc3QgZmlsdGVyID0ga2V5O1xyXG4gICAgICBmaWx0ZXJzVHJ1ZS5wdXNoKGZpbHRlcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXJUaGVhZChmaWx0ZXJzVHJ1ZSk7XHJcblxyXG4gIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcclxuICB0YWJsZS5hcHBlbmRDaGlsZCh0Ym9keSk7XHJcbiAgdGJvZHkuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gIGxpc3QuZm9yRWFjaChlbGVtZW50ID0+IHJlbmRlclJvd3MoZWxlbWVudCwgZmlsdGVyc1RydWUpKTtcclxuXHJcblxyXG5cclxuICAvKiBjcmVhdGUgYW5kIGZpbGwgdGhlYWQgd2l0aCBmaWx0ZXJzICovXHJcbiAgZnVuY3Rpb24gcmVuZGVyVGhlYWQoZmlsdGVyc1RydWUpIHtcclxuXHJcbiAgICBjb25zdCB0aGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XHJcblxyXG4gICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgdHIuaW5uZXJIVE1MID0gYFxyXG4gICAgPHRoPkRhdGUvVGltZTwvdGg+XHJcbiAgICA8dGggY2xhc3M9XCJ3ZWF0aGVyXCI+V2VhdGhlcjwvdGg+YDtcclxuXHJcbiAgICBmaWx0ZXJzVHJ1ZS5mb3JFYWNoKGZpbHRlciA9PiB7XHJcblxyXG4gICAgICBjb25zdCB0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XHJcbiAgICAgIHRoLmNsYXNzTmFtZSA9IGZpbHRlcjtcclxuXHJcbiAgICAgIHN3aXRjaCAoZmlsdGVyKSB7XHJcbiAgICAgICAgY2FzZSAndGVtcGVyYXR1cmUnOlxyXG4gICAgICAgICAgdGguaW5uZXJIVE1MID0gJ1RlbXBlcmF0dXJlJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ21heC10ZW1wJzpcclxuICAgICAgICAgIHRoLmlubmVySFRNTCA9ICdNYXggVGVtcC4nO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnbWluLXRlbXAnOlxyXG4gICAgICAgICAgdGguaW5uZXJIVE1MID0gJ01pbiBUZW1wLic7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdwcmVzc3VyZSc6XHJcbiAgICAgICAgICB0aC5pbm5lckhUTUwgPSAnUHJlc3N1cmUnO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnaHVtaWRpdHknOlxyXG4gICAgICAgICAgdGguaW5uZXJIVE1MID0gJ0h1bWlkaXR5JztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2ZlZWxzLWxpa2UnOlxyXG4gICAgICAgICAgdGguaW5uZXJIVE1MID0gJ0ZlZWxzIGxpa2UnO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICB0ci5hcHBlbmRDaGlsZCh0aCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGhlYWQuYXBwZW5kQ2hpbGQodHIpO1xyXG4gICAgdGFibGUuYXBwZW5kQ2hpbGQodGhlYWQpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qIGNyZWF0ZSBhbmQgZmlsbCByb3dzIGluIHRib2R5IHdpdGggZmlsdGVycyAqL1xyXG4gIGZ1bmN0aW9uIHJlbmRlclJvd3MoZWxlbSwgZmlsdGVyc1RydWUpIHtcclxuXHJcbiAgICBjb25zdCBkYXRlID0gZm9ybWF0RGF0ZUFuZFRpbWUoZWxlbS5kdF90eHQpO1xyXG4gICAgY29uc3QgaWNvbiA9IGA8aW1nIGNsYXNzPVwid2VhdGhlci1pbWdcIlxyXG4gICAgc3JjPVwiaHR0cDovL29wZW53ZWF0aGVybWFwLm9yZy9pbWcvd24vJHtlbGVtLndlYXRoZXJbMF0uaWNvbn1AMngucG5nXCIgXHJcbiAgICBhbHQ9XCIke2VsZW0ud2VhdGhlclswXS5kZXNjcmlwdGlvbn1cIiB0aXRsZT1cIiR7ZWxlbS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9ufVwiPmA7XHJcbiAgICBjb25zdCB0ZW1wZXJhdHVyZSA9IGVsZW0ubWFpbi50ZW1wO1xyXG4gICAgY29uc3QgbWF4VGVtcCA9IGVsZW0ubWFpbi50ZW1wX21heDtcclxuICAgIGNvbnN0IG1pblRlbXAgPSBlbGVtLm1haW4udGVtcF9taW47XHJcbiAgICBjb25zdCBwcmVzc3VyZSA9IGVsZW0ubWFpbi5wcmVzc3VyZTtcclxuICAgIGNvbnN0IGh1bWlkaXR5ID0gZWxlbS5tYWluLmh1bWlkaXR5O1xyXG4gICAgY29uc3QgZmVlbHNMaWtlID0gZWxlbS5tYWluLmZlZWxzX2xpa2U7XHJcblxyXG5cclxuICAgIC8vIGNyZWF0ZSBuZXcgdGFibGUgcm93XHJcbiAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICB0ci5pbm5lckhUTUwgPSBgXHJcbiAgICA8dGQ+JHtkYXRlfTwvdGQ+XHJcbiAgICA8dGQgY2xhc3M9XCJ3ZWF0aGVyXCI+JHtpY29ufTwvdGQ+YDtcclxuXHJcblxyXG4gICAgZmlsdGVyc1RydWUuZm9yRWFjaChmaWx0ZXIgPT4ge1xyXG5cclxuICAgICAgY29uc3QgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICB0ZC5jbGFzc05hbWUgPSBmaWx0ZXI7XHJcbiAgICAgIHRkLmlubmVySFRNTCA9IGZpbHRlcjtcclxuICAgICAgXHJcbiAgICAgIHN3aXRjaCAoZmlsdGVyKSB7XHJcbiAgICAgICAgY2FzZSAndGVtcGVyYXR1cmUnOlxyXG4gICAgICAgICAgdGQuaW5uZXJIVE1MID0gdGVtcGVyYXR1cmU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdtYXgtdGVtcCc6XHJcbiAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBtYXhUZW1wO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnbWluLXRlbXAnOlxyXG4gICAgICAgICAgdGQuaW5uZXJIVE1MID0gbWluVGVtcDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3ByZXNzdXJlJzpcclxuICAgICAgICAgIHRkLmlubmVySFRNTCA9IHByZXNzdXJlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnaHVtaWRpdHknOlxyXG4gICAgICAgICAgdGQuaW5uZXJIVE1MID0gaHVtaWRpdHk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdmZWVscy1saWtlJzpcclxuICAgICAgICAgIHRkLmlubmVySFRNTCA9IGZlZWxzTGlrZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCByZW5kZXJUYWJsZTsiLCJpbXBvcnQgZ2V0V2VhaGVyIGZyb20gXCIuLi9nZXRXZWFoZXJcIjtcclxuaW1wb3J0IHdlYXRoZXJIYW5kbGVyIGZyb20gXCIuLi93ZWF0aGVySGFuZGxlclwiO1xyXG5cclxuLyoqXHJcbiAqIFNldCB1bml0cyBmb3IgQVBJIHJlcXVzdCwgZ2V0IHJlcXVlc3QgYW5kIHJlbmRlciByZXN1bHRcclxuICovXHJcbmNvbnN0IHN3aXRjaGVySGFuZGxlciA9ICgpID0+IHtcclxuXHJcbiAgY29uc3Qgc3dpdGNoZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9nZ2xlQ2hlY2tfc3dpdGNoJyk7XHJcbiAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdW5pdHMnKTtcclxuXHJcbiAgLy8gY3VzdG9tIGNoZWNraW5nIHVuaXRzXHJcbiAgbGV0IHVuaXRzID0gJyc7XHJcbiAgaWYgKGNoZWNrYm94ICYmIGNoZWNrYm94LmNoZWNrZWQpIHtcclxuICAgIHVuaXRzID0gJ2ltcGVyaWFsJztcclxuICB9IGVsc2Uge1xyXG4gICAgdW5pdHMgPSAnbWV0cmljJztcclxuICB9XHJcblxyXG4gIHN3aXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgLy8gY2xpY2sgY2hlY2tpbmcgdW51dHNcclxuICAgIGlmIChjaGVja2JveCAmJiAhY2hlY2tib3guY2hlY2tlZCkge1xyXG4gICAgICB1bml0cyA9ICdpbXBlcmlhbCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1bml0cyA9ICdtZXRyaWMnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldCBkYXRhIEFQSSBhbmQgcmVuZGVyIHJlc3VsdFxyXG4gICAgY29uc3QgY2l0eUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NpdHknKTtcclxuICAgIGNvbnN0IHdlYXRoZXIgPSBnZXRXZWFoZXIoY2l0eUlucHV0LnZhbHVlLCB1bml0cyk7XHJcbiAgICB3ZWF0aGVyLnRoZW4od2VhdGhlckhhbmRsZXIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH0pO1xyXG4gIHJldHVybiB1bml0cztcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgc3dpdGNoZXJIYW5kbGVyOyIsImltcG9ydCB3ZWF0aGVySGFuZGxlciBmcm9tIFwiLi4vd2VhdGhlckhhbmRsZXJcIjtcclxuaW1wb3J0IGdldFdlYWhlciBmcm9tIFwiLi4vZ2V0V2VhaGVyXCI7XHJcbmltcG9ydCBzd2l0Y2hlckhhbmRsZXIgZnJvbSBcIi4uL3N3aXRjaGVyL3N3aXRjaGVySGFuZGxlclwiO1xyXG5cclxuLyoqXHJcbiAqIEFjY2VwdCBjaGVja2JveCBjaGFuZ2UgZXZlbnQgYW5kXHJcbiAqIGhpZGVzIGEgY29sdW1uIGRlcGVuZGluZyBvbiBpdHMgY2xhc3NOYW1lXHJcbiAqIHdoaWNoIG1hdGNoZXMgdGhlIGNoZWNrYm94LmlkXHJcbiAqIFxyXG4gKiBAcGFyYW0ge2V2ZW50fSBldmVudCBcclxuICovXHJcbmNvbnN0IGZpbHRlcnNIYW5kbGVyID0gZXZlbnQgPT4ge1xyXG5cclxuICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgY29uc3QgY2VsbHNJbkNvbHVtbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYHRoLiR7dGFyZ2V0LmlkfSwgdGQuJHt0YXJnZXQuaWR9YCk7XHJcblxyXG4gIGlmICh0YXJnZXQuY2hlY2tlZCkge1xyXG4gICAgY2VsbHNJbkNvbHVtbi5mb3JFYWNoKHRkID0+IHRkLnN0eWxlLmRpc3BsYXkgPSAndGFibGUtY2VsbCcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjZWxsc0luQ29sdW1uLmZvckVhY2godGQgPT4gdGQuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7XHJcbiAgfVxyXG5cclxuICAvKiBjaGVjayB1bml0cyAqL1xyXG4gIGNvbnN0IHVuaXRzID0gc3dpdGNoZXJIYW5kbGVyKCk7XHJcblxyXG4gIGNvbnN0IGNpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaXR5Jyk7XHJcbiAgY29uc3Qgd2VhdGhlciA9IGdldFdlYWhlcihjaXR5SW5wdXQudmFsdWUsIHVuaXRzKTtcclxuICB3ZWF0aGVyLnRoZW4od2VhdGhlckhhbmRsZXIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZmlsdGVyc0hhbmRsZXI7IiwiaW1wb3J0IHJlbmRlclRhYmxlIGZyb20gXCIuL3RhYmxlL3JlbmRlclRhYmxlXCI7XHJcbmltcG9ydCBmaWx0ZXJzSGFuZGxlciBmcm9tIFwiLi9maWx0ZXJzL2ZpbHRlcnNIYW5kbGVyXCI7XHJcblxyXG4vKipcclxuICogU2hvdyBlcnJvciBtZXNzYWdlLCBjaXR5IGRhdGEgYW5kIHJlbmRlciB3ZWF0aGVyIHRhYmxlXHJcbiAqIEBwYXJhbSB7anNvbn0gd2VhdGhlckRhdGEgZnJvbSBBUElcclxuICovXHJcbmNvbnN0IHdlYXRoZXJIYW5kbGVyID0gd2VhdGhlckRhdGEgPT4ge1xyXG5cclxuICAvKiBzaG93IGVycm9yIG1lc3NhZ2UgaWYgQVBJIHJldHVybiBlcnJvciAqL1xyXG4gIGNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVycm9yJyk7XHJcbiAgaWYgKHdlYXRoZXJEYXRhLm1lc3NhZ2UgIT09IDApIHtcclxuICAgIGVycm9yLmlubmVyVGV4dCA9IHdlYXRoZXJEYXRhLm1lc3NhZ2U7XHJcbiAgICBlcnJvci5zdHlsZS5vcGFjaXR5ID0gMTtcclxuICAgIHJldHVybjtcclxuICB9IGVsc2Uge1xyXG4gICAgZXJyb3Iuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgfVxyXG5cclxuICBjb25zdCBkYXRhID0gd2VhdGhlckRhdGE7XHJcbiAgXHJcbiAgLyogc2hvdyBjaXR5LCBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlICovXHJcbiAgY29uc3QgY2l0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaXR5X3RpdGxlJyk7XHJcbiAgY2l0eS5pbm5lclRleHQgPSBkYXRhLmNpdHkubmFtZTtcclxuICBjb25zdCBsYXRpdHVkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsYXRpdHVkZScpO1xyXG4gIGxhdGl0dWRlLmlubmVyVGV4dCA9IGRhdGEuY2l0eS5jb29yZC5sYXQ7XHJcbiAgY29uc3QgbG9uZ2l0dWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvbmdpdHVkZScpO1xyXG4gIGxvbmdpdHVkZS5pbm5lclRleHQgPSBkYXRhLmNpdHkuY29vcmQubG9uO1xyXG5cclxuXHJcbiAgcmVuZGVyVGFibGUoZGF0YS5saXN0KTtcclxuXHJcbiAgLyogdW5sb2NrIGZpbHRlcnMgKi9cclxuICBjb25zdCBmaWx0ZXJzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbHRlcnMnKTtcclxuICBjb25zdCBmaWx0ZXJzQ2hlY2JveGVzID0gZmlsdGVyc0Rpdi5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpO1xyXG4gIGZpbHRlcnNDaGVjYm94ZXMuZm9yRWFjaChjaGVja2JveCA9PiB7XHJcbiAgICBjaGVja2JveC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmaWx0ZXJzSGFuZGxlcik7XHJcbiAgfSk7XHJcblxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2VhdGhlckhhbmRsZXI7IiwiY29uc3Qgc2hvd0Vycm9yID0gZXZlbnQgPT4ge1xyXG5cclxuICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXJyb3InKTtcclxuXHJcbiAgaWYgKHRhcmdldC52YWx1ZS5sZW5ndGggPT09IDApIHtcclxuICAgIGVycm9yLmlubmVyVGV4dCA9ICd0aGUgZmllbGQgbXVzdCBub3QgYmUgZW1wdHknO1xyXG4gICAgZXJyb3Iuc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgfSBlbHNlIHtcclxuICAgIGVycm9yLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG4gIH1cclxufTtcclxuZXhwb3J0IGRlZmF1bHQgc2hvd0Vycm9yOyIsImltcG9ydCAnLi9zY3NzL3N0eWxlLnNjc3MnO1xyXG5pbXBvcnQgZ2V0V2VhaGVyIGZyb20gJy4vY29tcG9uZW50cy9nZXRXZWFoZXInO1xyXG5pbXBvcnQgd2VhdGhlckhhbmRsZXIgZnJvbSAnLi9jb21wb25lbnRzL3dlYXRoZXJIYW5kbGVyJztcclxuaW1wb3J0IGZpbHRlcnNIYW5kbGVyIGZyb20gJy4vY29tcG9uZW50cy9maWx0ZXJzL2ZpbHRlcnNIYW5kbGVyJztcclxuaW1wb3J0IHN3aXRjaGVySGFuZGxlciBmcm9tICcuL2NvbXBvbmVudHMvc3dpdGNoZXIvc3dpdGNoZXJIYW5kbGVyJztcclxuaW1wb3J0IHNob3dFcnJvciBmcm9tICcuL2NvbXBvbmVudHMvZm9ybS9zaG93RXJyb3InO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuXHJcbiAgLy8gU2hvdyBlcnJvciBpZiBpbnB1dCBhcmUgZW1wdHlcclxuICBjb25zdCBjaXR5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2l0eScpO1xyXG4gIGNpdHlJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHNob3dFcnJvcik7XHJcblxyXG4gIFxyXG4gIC8vIGZpbHRlcnNcclxuICBjb25zdCBmaWx0ZXJzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbHRlcnMnKTtcclxuICBjb25zdCBmaWx0ZXJzQ2hlY2JveGVzID0gZmlsdGVyc0Rpdi5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpO1xyXG4gIGZpbHRlcnNDaGVjYm94ZXMuZm9yRWFjaChjaGVja2JveCA9PiB7XHJcbiAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmaWx0ZXJzSGFuZGxlcik7XHJcbiAgfSk7XHJcblxyXG5cclxuICAvLyBldmVudCBzdWJtaXQgZm9ybVxyXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IHVuaXRzID0gc3dpdGNoZXJIYW5kbGVyKCk7XHJcblxyXG4gICAgY29uc3Qgd2VhdGhlciA9IGdldFdlYWhlcihjaXR5SW5wdXQudmFsdWUsIHVuaXRzKTtcclxuICAgIHdlYXRoZXIudGhlbih3ZWF0aGVySGFuZGxlcik7XHJcbiAgfSk7XHJcblxyXG5cclxuICAvLyBldmVudCB0b2dnbGUgc3dpdGNoZXJcclxuICBzd2l0Y2hlckhhbmRsZXIoKTtcclxuXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=