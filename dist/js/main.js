!function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(r,c,function(t){return e[t]}.bind(null,c));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){},function(e,t,n){"use strict";n.r(t);n(0);var r=(e,t="metric")=>fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${e}&units=${t}&appid=a71cbacce1b2b9aa059f27a00094c380`).then(e=>e.json()).then(e=>e.cod&&400===e.cod?e.message:e);function c(e){return e>9?e:`0${e}`}var o=e=>{const t=new Date(e),n=c(t.getDate()),r=c(t.getMonth()+1),o=c(t.getHours()),a=c(t.getMinutes());return`${n}/${r}/${t.getFullYear()} ${o}:${a}`};var a=e=>{const t=document.querySelector(".table-wrap");t.innerHTML="";const n=document.createElement("table");n.className="table",t.appendChild(n);const r=document.querySelector(".filters").querySelectorAll("input[type=checkbox]");let c={};r.forEach(e=>{c[e.id]=e.checked});const a=[];for(const e in c)if(c.hasOwnProperty(e)&&!0===c[e]){const t=e;a.push(t)}!function(e){const t=document.createElement("thead"),r=document.createElement("tr");r.innerHTML='\n    <th>Date/Time</th>\n    <th class="weather">Weather</th>',e.forEach(e=>{const t=document.createElement("th");switch(t.className=e,e){case"temperature":t.innerHTML="Temperature";break;case"max-temp":t.innerHTML="Max Temp.";break;case"min-temp":t.innerHTML="Min Temp.";break;case"pressure":t.innerHTML="Pressure";break;case"humidity":t.innerHTML="Humidity";break;case"feels-like":t.innerHTML="Feels like"}r.appendChild(t)}),t.appendChild(r),n.appendChild(t)}(a);const i=document.createElement("tbody");n.appendChild(i),i.innerHTML="",e.forEach(e=>function(e,t){const n=o(e.dt_txt),r=`<img class="weather-img"\n    src="http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png" \n    alt="${e.weather[0].description}" title="${e.weather[0].description}">`,c=e.main.temp,a=e.main.temp_max,l=e.main.temp_min,u=e.main.pressure,s=e.main.humidity,d=e.main.feels_like,m=document.createElement("tr");m.innerHTML=`\n    <td>${n}</td>\n    <td class="weather">${r}</td>`,t.forEach(e=>{const t=document.createElement("td");switch(t.className=e,t.innerHTML=e,e){case"temperature":t.innerHTML=c;break;case"max-temp":t.innerHTML=a;break;case"min-temp":t.innerHTML=l;break;case"pressure":t.innerHTML=u;break;case"humidity":t.innerHTML=s;break;case"feels-like":t.innerHTML=d}m.appendChild(t)}),i.appendChild(m)}(e,a))};var i=()=>{const e=document.querySelector(".toggleCheck_switch"),t=document.querySelector("#units");let n="";return n=t&&t.checked?"imperial":"metric",e.addEventListener("click",()=>{n=t&&!t.checked?"imperial":"metric";const e=document.querySelector("#city");r(e.value,n).then(u)}),n};var l=e=>{const t=e.target,n=document.querySelectorAll(`th.${t.id}, td.${t.id}`);t.checked?n.forEach(e=>{e.style.display="table-cell"}):n.forEach(e=>{e.style.display="none"});const c=i(),o=document.querySelector("#city");r(o.value,c).then(u)};var u=e=>{const t=document.querySelector(".error");if(0!==e.message)return t.innerText=e.message,void(t.style.opacity=1);t.style.opacity=0;const n=e;document.querySelector(".city_title").innerText=n.city.name,document.querySelector("#latitude").innerText=n.city.coord.lat,document.querySelector("#longitude").innerText=n.city.coord.lon,a(n.list),document.querySelector(".filters").querySelectorAll("input[type=checkbox]").forEach(e=>{e.removeAttribute("disabled"),e.addEventListener("change",l)})};var s=e=>{const t=e.target,n=document.querySelector(".error");0===t.value.length?(n.innerText="the field must not be empty",n.style.opacity=1):n.style.opacity=0};document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#city");e.addEventListener("input",s);const t=document.querySelector(".filters").querySelectorAll("input[type=checkbox]"),n=document.querySelector("tbody");t.forEach(e=>{0===n.children.length?e.setAttribute("disabled",!0):(e.removeAttribute("disabled"),e.addEventListener("change",l))}),document.querySelector(".form").addEventListener("submit",()=>{event.preventDefault();const t=i();r(e.value,t).then(u)}),i()})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZ2V0V2VhaGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYmxlL2Zvcm1hdERhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFibGUvcmVuZGVyVGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3dpdGNoZXIvc3dpdGNoZXJIYW5kbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2ZpbHRlcnMvZmlsdGVyc0hhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvd2VhdGhlckhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZm9ybS9zaG93RXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRXZWFoZXIiLCJjaXR5IiwidW5pdHMiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJyZXN1bHQiLCJjb2QiLCJtZXNzYWdlIiwiZm9ybWF0TnVtYmVyIiwibnVtYmVyIiwiZm9ybWF0RGF0ZUFuZFRpbWUiLCJkYXRhIiwibmV3RGF0ZSIsIkRhdGUiLCJkYXRlIiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJob3VyIiwiZ2V0SG91cnMiLCJtaW51dGVzIiwiZ2V0TWludXRlcyIsImdldEZ1bGxZZWFyIiwicmVuZGVyVGFibGUiLCJsaXN0IiwidGFibGVTZWN0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwidGFibGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJmaWx0ZXJzQ2hlY2JveGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImZpbHRlcnMiLCJmb3JFYWNoIiwiY2hlY2tib3giLCJpZCIsImNoZWNrZWQiLCJmaWx0ZXJzVHJ1ZSIsImZpbHRlciIsInB1c2giLCJ0aGVhZCIsInRyIiwidGgiLCJyZW5kZXJUaGVhZCIsInRib2R5IiwiZWxlbWVudCIsImVsZW0iLCJkdF90eHQiLCJpY29uIiwid2VhdGhlciIsImRlc2NyaXB0aW9uIiwidGVtcGVyYXR1cmUiLCJtYWluIiwidGVtcCIsIm1heFRlbXAiLCJ0ZW1wX21heCIsIm1pblRlbXAiLCJ0ZW1wX21pbiIsInByZXNzdXJlIiwiaHVtaWRpdHkiLCJmZWVsc0xpa2UiLCJmZWVsc19saWtlIiwidGQiLCJyZW5kZXJSb3dzIiwic3dpdGNoZXJIYW5kbGVyIiwic3dpdGNoZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiY2l0eUlucHV0Iiwid2VhdGhlckhhbmRsZXIiLCJmaWx0ZXJzSGFuZGxlciIsImV2ZW50IiwidGFyZ2V0IiwiY29sdW0iLCJzdHlsZSIsImRpc3BsYXkiLCJ3ZWF0aGVyRGF0YSIsImVycm9yIiwiaW5uZXJUZXh0Iiwib3BhY2l0eSIsImNvb3JkIiwibGF0IiwibG9uIiwicmVtb3ZlQXR0cmlidXRlIiwic2hvd0Vycm9yIiwibGVuZ3RoIiwiY2hpbGRyZW4iLCJzZXRBdHRyaWJ1dGUiLCJwcmV2ZW50RGVmYXVsdCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIs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R08sSUFBMUJVLEVBQU15QyxTQUFTRCxPQUNqQmxELEVBQVNvRCxhQUFhLFlBQVksSUFFbENwRCxFQUFTZ0QsZ0JBQWdCLFlBQ3pCaEQsRUFBU2dDLGlCQUFpQixTQUFVRyxNQU0zQjlDLFNBQVNDLGNBQWMsU0FDL0IwQyxpQkFBaUIsU0FBVSxLQUM5QkksTUFBTWlCLGlCQUNOLE1BQU0xRixFQUFRbUUsSUFFRXJFLEVBQVV3RSxFQUFVdkYsTUFBT2lCLEdBQ25DRSxLQUFLcUUsS0FLZkoiLCJmaWxlIjoianMvbWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIi8qKlxyXG4gKiBGZXRjaCBkYXRhIGZyb20gQVBJIGFuZCByZXR1cm4gSlNPTlxyXG4gKiBcclxuICogQHBhcmFtIHtzdHJpbmd9IGNpdHkgbmFtZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdW5pdHMgXHJcbiAqL1xyXG5jb25zdCBnZXRXZWFoZXIgPSAoY2l0eSwgdW5pdHMgPSAnbWV0cmljJykgPT4ge1xyXG5cclxuICBjb25zdCBvcGVuV2VhdGhlckFwaUtleSA9ICdhNzFjYmFjY2UxYjJiOWFhMDU5ZjI3YTAwMDk0YzM4MCc7IC8vINC80L7QuSDQutC70Y7Rh1xyXG4gIGNvbnN0IHdlYXRoZXJBcGlMaW5rID0gYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD9xPSR7Y2l0eX0mdW5pdHM9JHt1bml0c30mYXBwaWQ9JHtvcGVuV2VhdGhlckFwaUtleX1gO1xyXG5cclxuICByZXR1cm4gZmV0Y2god2VhdGhlckFwaUxpbmspXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICBpZiAocmVzdWx0LmNvZCAmJiByZXN1bHQuY29kID09PSA0MDApIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0Lm1lc3NhZ2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZ2V0V2VhaGVyOyIsImNvbnN0IGZvcm1hdERhdGVBbmRUaW1lID0gZGF0YSA9PiB7XHJcblxyXG4gIGNvbnN0IG5ld0RhdGUgPSBuZXcgRGF0ZShkYXRhKTtcclxuXHJcbiAgY29uc3QgZGF0ZSA9IGZvcm1hdE51bWJlcihuZXdEYXRlLmdldERhdGUoKSk7XHJcbiAgY29uc3QgbW9udGggPSBmb3JtYXROdW1iZXIobmV3RGF0ZS5nZXRNb250aCgpICsgMSk7XHJcbiAgY29uc3QgaG91ciA9IGZvcm1hdE51bWJlcihuZXdEYXRlLmdldEhvdXJzKCkpO1xyXG4gIGNvbnN0IG1pbnV0ZXMgPSBmb3JtYXROdW1iZXIobmV3RGF0ZS5nZXRNaW51dGVzKCkpO1xyXG5cclxuICByZXR1cm4gYCR7ZGF0ZX0vJHttb250aH0vJHtuZXdEYXRlLmdldEZ1bGxZZWFyKCl9ICR7aG91cn06JHttaW51dGVzfWA7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBmb3JtYXROdW1iZXIobnVtYmVyKSB7XHJcbiAgcmV0dXJuIG51bWJlciA+IDkgPyBudW1iZXIgOiBgMCR7bnVtYmVyfWA7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZvcm1hdERhdGVBbmRUaW1lOyIsImltcG9ydCBmb3JtYXREYXRlQW5kVGltZSBmcm9tIFwiLi9mb3JtYXREYXRlXCI7XHJcblxyXG5jb25zdCByZW5kZXJUYWJsZSA9IChsaXN0KSA9PiB7XHJcbiBcclxuICAvKiBjbGVhciB0YWJsZSB3cmFwcGVyICovXHJcbiAgY29uc3QgdGFibGVTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhYmxlLXdyYXAnKTtcclxuICB0YWJsZVNlY3Rpb24uaW5uZXJIVE1MID0gJyc7ICAvLyBjbGVhciB0YWJsZSBzZWN0aW9uXHJcblxyXG4gIC8qIGNyZWF0ZSBuZXcgdGFibGUgKi9cclxuICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XHJcbiAgdGFibGUuY2xhc3NOYW1lID0gJ3RhYmxlJztcclxuICB0YWJsZVNlY3Rpb24uYXBwZW5kQ2hpbGQodGFibGUpOyBcclxuXHJcblxyXG5cclxuICAvKiBjcmVhdGUgZmlsdGVycyBvYmplY3QgKi9cclxuICBjb25zdCBmaWx0ZXJzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbHRlcnMnKTtcclxuICBjb25zdCBmaWx0ZXJzQ2hlY2JveGVzID0gZmlsdGVyc0Rpdi5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpO1xyXG4gIGxldCBmaWx0ZXJzID0ge31cclxuICBmaWx0ZXJzQ2hlY2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG4gICAgZmlsdGVyc1tjaGVja2JveC5pZF0gPSBjaGVja2JveC5jaGVja2VkO1xyXG4gIH0pO1xyXG5cclxuICAvKiBjcmVhdGUgYW4gYXJyYXkgb2YgZmlsdGVycyB3aG9zZSBzdGF0dXMgaXMgdHJ1ZSAqL1xyXG4gIGNvbnN0IGZpbHRlcnNUcnVlID0gW11cclxuICBmb3IgKGNvbnN0IGtleSBpbiBmaWx0ZXJzKSB7XHJcbiAgICBpZiAoZmlsdGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGZpbHRlcnNba2V5XSA9PT0gdHJ1ZSkge1xyXG4gICAgICBjb25zdCBmaWx0ZXIgPSBrZXk7XHJcbiAgICAgIGZpbHRlcnNUcnVlLnB1c2goZmlsdGVyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlclRoZWFkKGZpbHRlcnNUcnVlKTtcclxuXHJcbiAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xyXG4gIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcclxuICB0Ym9keS5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgbGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4gcmVuZGVyUm93cyhlbGVtZW50LCBmaWx0ZXJzVHJ1ZSkpO1xyXG5cclxuXHJcblxyXG4gIC8qIGNyZWF0ZSBhbmQgZmlsbCB0aGVhZCB3aXRoIGZpbHRlcnMgKi9cclxuICBmdW5jdGlvbiByZW5kZXJUaGVhZChmaWx0ZXJzVHJ1ZSkge1xyXG5cclxuICAgIGNvbnN0IHRoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcclxuXHJcbiAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICB0ci5pbm5lckhUTUwgPSBgXHJcbiAgICA8dGg+RGF0ZS9UaW1lPC90aD5cclxuICAgIDx0aCBjbGFzcz1cIndlYXRoZXJcIj5XZWF0aGVyPC90aD5gO1xyXG5cclxuICAgIGZpbHRlcnNUcnVlLmZvckVhY2goZmlsdGVyID0+IHtcclxuXHJcbiAgICAgIGNvbnN0IHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcclxuICAgICAgdGguY2xhc3NOYW1lID0gZmlsdGVyO1xyXG5cclxuICAgICAgc3dpdGNoIChmaWx0ZXIpIHtcclxuICAgICAgICBjYXNlICd0ZW1wZXJhdHVyZSc6XHJcbiAgICAgICAgICB0aC5pbm5lckhUTUwgPSAnVGVtcGVyYXR1cmUnO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnbWF4LXRlbXAnOlxyXG4gICAgICAgICAgdGguaW5uZXJIVE1MID0gJ01heCBUZW1wLic7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdtaW4tdGVtcCc6XHJcbiAgICAgICAgICB0aC5pbm5lckhUTUwgPSAnTWluIFRlbXAuJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3ByZXNzdXJlJzpcclxuICAgICAgICAgIHRoLmlubmVySFRNTCA9ICdQcmVzc3VyZSc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdodW1pZGl0eSc6XHJcbiAgICAgICAgICB0aC5pbm5lckhUTUwgPSAnSHVtaWRpdHknO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnZmVlbHMtbGlrZSc6XHJcbiAgICAgICAgICB0aC5pbm5lckhUTUwgPSAnRmVlbHMgbGlrZSc7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHRyLmFwcGVuZENoaWxkKHRoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0aGVhZC5hcHBlbmRDaGlsZCh0cik7XHJcbiAgICB0YWJsZS5hcHBlbmRDaGlsZCh0aGVhZCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyogY3JlYXRlIGFuZCBmaWxsIHJvd3MgaW4gdGJvZHkgd2l0aCBmaWx0ZXJzICovXHJcbiAgZnVuY3Rpb24gcmVuZGVyUm93cyhlbGVtLCBmaWx0ZXJzVHJ1ZSkge1xyXG5cclxuICAgIGNvbnN0IGRhdGUgPSBmb3JtYXREYXRlQW5kVGltZShlbGVtLmR0X3R4dCk7XHJcbiAgICBjb25zdCBpY29uID0gYDxpbWcgY2xhc3M9XCJ3ZWF0aGVyLWltZ1wiXHJcbiAgICBzcmM9XCJodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93bi8ke2VsZW0ud2VhdGhlclswXS5pY29ufUAyeC5wbmdcIiBcclxuICAgIGFsdD1cIiR7ZWxlbS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9ufVwiIHRpdGxlPVwiJHtlbGVtLndlYXRoZXJbMF0uZGVzY3JpcHRpb259XCI+YDtcclxuICAgIGNvbnN0IHRlbXBlcmF0dXJlID0gZWxlbS5tYWluLnRlbXA7XHJcbiAgICBjb25zdCBtYXhUZW1wID0gZWxlbS5tYWluLnRlbXBfbWF4O1xyXG4gICAgY29uc3QgbWluVGVtcCA9IGVsZW0ubWFpbi50ZW1wX21pbjtcclxuICAgIGNvbnN0IHByZXNzdXJlID0gZWxlbS5tYWluLnByZXNzdXJlO1xyXG4gICAgY29uc3QgaHVtaWRpdHkgPSBlbGVtLm1haW4uaHVtaWRpdHk7XHJcbiAgICBjb25zdCBmZWVsc0xpa2UgPSBlbGVtLm1haW4uZmVlbHNfbGlrZTtcclxuXHJcblxyXG4gICAgLy8gY3JlYXRlIG5ldyB0YWJsZSByb3dcclxuICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgIHRyLmlubmVySFRNTCA9IGBcclxuICAgIDx0ZD4ke2RhdGV9PC90ZD5cclxuICAgIDx0ZCBjbGFzcz1cIndlYXRoZXJcIj4ke2ljb259PC90ZD5gO1xyXG5cclxuXHJcbiAgICBmaWx0ZXJzVHJ1ZS5mb3JFYWNoKGZpbHRlciA9PiB7XHJcblxyXG4gICAgICBjb25zdCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgIHRkLmNsYXNzTmFtZSA9IGZpbHRlcjtcclxuICAgICAgdGQuaW5uZXJIVE1MID0gZmlsdGVyO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChmaWx0ZXIpIHtcclxuICAgICAgICBjYXNlICd0ZW1wZXJhdHVyZSc6XHJcbiAgICAgICAgICB0ZC5pbm5lckhUTUwgPSB0ZW1wZXJhdHVyZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ21heC10ZW1wJzpcclxuICAgICAgICAgIHRkLmlubmVySFRNTCA9IG1heFRlbXA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdtaW4tdGVtcCc6XHJcbiAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBtaW5UZW1wO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncHJlc3N1cmUnOlxyXG4gICAgICAgICAgdGQuaW5uZXJIVE1MID0gcHJlc3N1cmU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdodW1pZGl0eSc6XHJcbiAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBodW1pZGl0eTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2ZlZWxzLWxpa2UnOlxyXG4gICAgICAgICAgdGQuaW5uZXJIVE1MID0gZmVlbHNMaWtlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJlbmRlclRhYmxlOyIsImltcG9ydCBnZXRXZWFoZXIgZnJvbSBcIi4uL2dldFdlYWhlclwiO1xyXG5pbXBvcnQgd2VhdGhlckhhbmRsZXIgZnJvbSBcIi4uL3dlYXRoZXJIYW5kbGVyXCI7XHJcbi8qKlxyXG4gKiBTZXQgdW5pdHMgZm9yIEFQSSByZXF1c3QsIGdldCByZXF1ZXN0IGFuZCByZW5kZXIgcmVzdWx0XHJcbiAqL1xyXG5jb25zdCBzd2l0Y2hlckhhbmRsZXIgPSAoKSA9PiB7XHJcblxyXG4gIGNvbnN0IHN3aXRjaGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZ2dsZUNoZWNrX3N3aXRjaCcpO1xyXG4gIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VuaXRzJyk7XHJcblxyXG4gIC8vIGN1c3RvbSBjaGVja2luZyB1bml0c1xyXG4gIGxldCB1bml0cyA9ICcnO1xyXG4gIGlmIChjaGVja2JveCAmJiBjaGVja2JveC5jaGVja2VkKSB7XHJcbiAgICB1bml0cyA9ICdpbXBlcmlhbCc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHVuaXRzID0gJ21ldHJpYyc7XHJcbiAgfVxyXG5cclxuICBzd2l0Y2hlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIC8vIGNsaWNrIGNoZWNraW5nIHVudXRzXHJcbiAgICBpZiAoY2hlY2tib3ggJiYgIWNoZWNrYm94LmNoZWNrZWQpIHtcclxuICAgICAgdW5pdHMgPSAnaW1wZXJpYWwnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdW5pdHMgPSAnbWV0cmljJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBnZXQgZGF0YSBBUEkgYW5kIHJlbmRlciByZXN1bHRcclxuICAgIGNvbnN0IGNpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaXR5Jyk7XHJcbiAgICBjb25zdCB3ZWF0aGVyID0gZ2V0V2VhaGVyKGNpdHlJbnB1dC52YWx1ZSwgdW5pdHMpO1xyXG4gICAgd2VhdGhlci50aGVuKHdlYXRoZXJIYW5kbGVyKTtcclxuICAgIHJldHVybjtcclxuICB9KTtcclxuICByZXR1cm4gdW5pdHM7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IHN3aXRjaGVySGFuZGxlcjsiLCJpbXBvcnQgd2VhdGhlckhhbmRsZXIgZnJvbSBcIi4uL3dlYXRoZXJIYW5kbGVyXCI7XHJcbmltcG9ydCBnZXRXZWFoZXIgZnJvbSBcIi4uL2dldFdlYWhlclwiO1xyXG5pbXBvcnQgc3dpdGNoZXJIYW5kbGVyIGZyb20gXCIuLi9zd2l0Y2hlci9zd2l0Y2hlckhhbmRsZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBBY2NlcHQgY2hlY2tib3ggY2hhbmdlIGV2ZW50IGFuZFxyXG4gKiBoaWRlcyBhIGNvbHVtbiBkZXBlbmRpbmcgb24gaXRzIGNsYXNzTmFtZVxyXG4gKiB3aGljaCBtYXRjaGVzIHRoZSBjaGVja2JveC5pZFxyXG4gKiBcclxuICogQHBhcmFtIHtldmVudH0gZXZlbnQgXHJcbiAqL1xyXG5jb25zdCBmaWx0ZXJzSGFuZGxlciA9IGV2ZW50ID0+IHtcclxuXHJcbiAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gIGNvbnN0IGNvbHVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgdGguJHt0YXJnZXQuaWR9LCB0ZC4ke3RhcmdldC5pZH1gKTtcclxuXHJcbiAgaWYgKHRhcmdldC5jaGVja2VkKSB7XHJcbiAgICBjb2x1bS5mb3JFYWNoKHRkID0+IHtcclxuICAgICAgdGQuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1jZWxsJztcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb2x1bS5mb3JFYWNoKHRkID0+IHtcclxuICAgICAgdGQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyogY2hlY2sgdW5pdHMgKi9cclxuICBjb25zdCB1bml0cyA9IHN3aXRjaGVySGFuZGxlcigpO1xyXG5cclxuICBjb25zdCBjaXR5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2l0eScpO1xyXG4gIGNvbnN0IHdlYXRoZXIgPSBnZXRXZWFoZXIoY2l0eUlucHV0LnZhbHVlLCB1bml0cyk7XHJcbiAgd2VhdGhlci50aGVuKHdlYXRoZXJIYW5kbGVyKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZpbHRlcnNIYW5kbGVyOyIsImltcG9ydCByZW5kZXJUYWJsZSBmcm9tIFwiLi90YWJsZS9yZW5kZXJUYWJsZVwiO1xyXG5pbXBvcnQgZmlsdGVyc0hhbmRsZXIgZnJvbSBcIi4vZmlsdGVycy9maWx0ZXJzSGFuZGxlclwiO1xyXG5cclxuLyoqXHJcbiAqIFNob3cgZXJyb3IgbWVzc2FnZSwgY2l0eSBkYXRhIGFuZCByZW5kZXIgd2VhdGhlciB0YWJsZVxyXG4gKiBAcGFyYW0ge2pzb259IHdlYXRoZXJEYXRhIGZyb20gQVBJXHJcbiAqL1xyXG5jb25zdCB3ZWF0aGVySGFuZGxlciA9IHdlYXRoZXJEYXRhID0+IHtcclxuXHJcbiAgLyogc2hvdyBlcnJvciBtZXNzYWdlIGlmIEFQSSByZXR1cm4gZXJyb3IgKi9cclxuICBjb25zdCBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvcicpO1xyXG4gIGlmICh3ZWF0aGVyRGF0YS5tZXNzYWdlICE9PSAwKSB7XHJcbiAgICBlcnJvci5pbm5lclRleHQgPSB3ZWF0aGVyRGF0YS5tZXNzYWdlO1xyXG4gICAgZXJyb3Iuc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgICByZXR1cm47XHJcbiAgfSBlbHNlIHtcclxuICAgIGVycm9yLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZGF0YSA9IHdlYXRoZXJEYXRhO1xyXG4gIFxyXG4gIC8qIHNob3cgY2l0eSwgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSAqL1xyXG4gIGNvbnN0IGNpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2l0eV90aXRsZScpO1xyXG4gIGNpdHkuaW5uZXJUZXh0ID0gZGF0YS5jaXR5Lm5hbWU7XHJcbiAgY29uc3QgbGF0aXR1ZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGF0aXR1ZGUnKTtcclxuICBsYXRpdHVkZS5pbm5lclRleHQgPSBkYXRhLmNpdHkuY29vcmQubGF0O1xyXG4gIGNvbnN0IGxvbmdpdHVkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb25naXR1ZGUnKTtcclxuICBsb25naXR1ZGUuaW5uZXJUZXh0ID0gZGF0YS5jaXR5LmNvb3JkLmxvbjtcclxuXHJcblxyXG4gIHJlbmRlclRhYmxlKGRhdGEubGlzdCk7XHJcblxyXG4gIC8qIHVubG9jayBmaWx0ZXJzICovXHJcbiAgY29uc3QgZmlsdGVyc0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzJyk7XHJcbiAgY29uc3QgZmlsdGVyc0NoZWNib3hlcyA9IGZpbHRlcnNEaXYucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcclxuICBmaWx0ZXJzQ2hlY2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG4gICAgY2hlY2tib3gucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZmlsdGVyc0hhbmRsZXIpO1xyXG4gIH0pO1xyXG5cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHdlYXRoZXJIYW5kbGVyOyIsImNvbnN0IHNob3dFcnJvciA9IGV2ZW50ID0+IHtcclxuXHJcbiAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gIGNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVycm9yJyk7XHJcblxyXG4gIGlmICh0YXJnZXQudmFsdWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICBlcnJvci5pbm5lclRleHQgPSAndGhlIGZpZWxkIG11c3Qgbm90IGJlIGVtcHR5JztcclxuICAgIGVycm9yLnN0eWxlLm9wYWNpdHkgPSAxO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBlcnJvci5zdHlsZS5vcGFjaXR5ID0gMDtcclxuICB9XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IHNob3dFcnJvcjsiLCJpbXBvcnQgJy4vc2Nzcy9zdHlsZS5zY3NzJztcclxuaW1wb3J0IGdldFdlYWhlciBmcm9tICcuL2NvbXBvbmVudHMvZ2V0V2VhaGVyJztcclxuaW1wb3J0IHdlYXRoZXJIYW5kbGVyIGZyb20gJy4vY29tcG9uZW50cy93ZWF0aGVySGFuZGxlcic7XHJcbmltcG9ydCBmaWx0ZXJzSGFuZGxlciBmcm9tICcuL2NvbXBvbmVudHMvZmlsdGVycy9maWx0ZXJzSGFuZGxlcic7XHJcbmltcG9ydCBzd2l0Y2hlckhhbmRsZXIgZnJvbSAnLi9jb21wb25lbnRzL3N3aXRjaGVyL3N3aXRjaGVySGFuZGxlcic7XHJcbmltcG9ydCBzaG93RXJyb3IgZnJvbSAnLi9jb21wb25lbnRzL2Zvcm0vc2hvd0Vycm9yJztcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcblxyXG4gIC8vIFNob3cgZXJyb3IgaWYgaW5wdXQgYXJlIGVtcHR5XHJcbiAgY29uc3QgY2l0eUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NpdHknKTtcclxuICBjaXR5SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBzaG93RXJyb3IpO1xyXG5cclxuICBcclxuICAvLyBmaWx0ZXJzXHJcbiAgY29uc3QgZmlsdGVyc0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzJyk7XHJcbiAgY29uc3QgZmlsdGVyc0NoZWNib3hlcyA9IGZpbHRlcnNEaXYucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcclxuICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XHJcbiAgZmlsdGVyc0NoZWNib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcclxuICAgXHJcbiAgICAvKiBsb2NrIGZpbHRlcnMgaWYgdGFibGUgYXJlIGVtcHR5ICovXHJcbiAgICBpZiAodGJvZHkuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNoZWNrYm94LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZmlsdGVyc0hhbmRsZXIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcbiAgLy8gZXZlbnQgc3VibWl0IGZvcm1cclxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCB1bml0cyA9IHN3aXRjaGVySGFuZGxlcigpO1xyXG5cclxuICAgIGNvbnN0IHdlYXRoZXIgPSBnZXRXZWFoZXIoY2l0eUlucHV0LnZhbHVlLCB1bml0cyk7XHJcbiAgICB3ZWF0aGVyLnRoZW4od2VhdGhlckhhbmRsZXIpO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgLy8gZXZlbnQgdG9nZ2xlIHN3aXRjaGVyXHJcbiAgc3dpdGNoZXJIYW5kbGVyKCk7XHJcblxyXG59KTsiXSwic291cmNlUm9vdCI6IiJ9