!function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(r,c,function(t){return e[t]}.bind(null,c));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){},function(e,t,n){"use strict";n.r(t);n(0);var r=(e,t="metric")=>fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${e}&units=${t}&appid=8a480d014fa9dd3c95d8fbf4531869d3`).then(e=>e.json()).then(e=>e.cod&&400===e.cod?e.message:e);function c(e){return e>9?e:`0${e}`}var i=e=>{const t=new Date(e),n=c(t.getDate()),r=c(t.getMonth()+1),i=c(t.getHours()),o=c(t.getMinutes());return`${n}/${r}/${t.getFullYear()} ${i}:${o}`};var o=e=>`<img class="weather-img"\n  src="https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png" \n  alt="${e.weather[0].description}" title="${e.weather[0].description}">`;var s=e=>{const t=document.querySelector(".table-wrap");t.innerHTML="";const n=document.createElement("table");n.className="table",t.appendChild(n);const r=document.querySelectorAll(".filters input[type=checkbox]");let c={};r.forEach(e=>{c[e.id]=e.checked});const s=[];for(const e in c)if(c.hasOwnProperty(e)&&!0===c[e]){const t=e;s.push(t)}!function(e){const t=document.createElement("thead"),r=document.createElement("tr");r.innerHTML='\n    <th>Date/Time</th>\n    <th class="weather">Weather</th>',e.forEach(e=>{const t=document.createElement("th");switch(t.className=e,e){case"temperature":t.innerHTML="Temperature";break;case"max-temp":t.innerHTML="Max Temp.";break;case"min-temp":t.innerHTML="Min Temp.";break;case"pressure":t.innerHTML="Pressure";break;case"humidity":t.innerHTML="Humidity";break;case"feels-like":t.innerHTML="Feels like"}r.appendChild(t)}),t.appendChild(r),n.appendChild(t)}(s);const a=document.createElement("tbody");n.appendChild(a),a.innerHTML="",e.forEach(e=>function(e,t){const n=i(e.dt_txt),r=o(e),c=Math.round(e.main.temp),s=Math.round(e.main.temp_max),u=Math.round(e.main.temp_min),l=e.main.pressure,d=e.main.humidity,m=Math.round(e.main.feels_like),h=document.createElement("tr");h.innerHTML=`\n    <td>${n}</td>\n    <td class="weather">${r}</td>`,t.forEach(e=>{const t=document.createElement("td");switch(t.className=e,t.innerHTML=e,e){case"temperature":t.innerHTML=c;break;case"max-temp":t.innerHTML=s;break;case"min-temp":t.innerHTML=u;break;case"pressure":t.innerHTML=l;break;case"humidity":t.innerHTML=d;break;case"feels-like":t.innerHTML=m}h.appendChild(t)}),a.appendChild(h)}(e,s))};var a=e=>{document.querySelector(".city_title").innerText=`${e.city.name}, ${e.city.country}`,document.querySelector("#latitude").innerText=e.city.coord.lat,document.querySelector("#longitude").innerText=e.city.coord.lon};var u=e=>{const t=document.querySelector(".error");if(0!==e.message)return t.innerText=e.message,void(t.style.opacity=1);t.style.opacity=0;const n=e;a(n),s(n.list)};var l=e=>{const t=e.target,n=document.querySelector(".error");0===t.value.length?(n.innerText="the field must not be empty",n.style.opacity=1):n.style.opacity=0};var d=class{constructor(){this.units="metric"}getUnits(){const e=document.querySelector("#units");return e&&e.checked?this.units="imperial":this.units="metric",this.units}setUnits(){const e=document.querySelector("#units");e&&!e.checked?this.units="imperial":this.units="metric";const t=document.querySelector("#city");return r(t.value,this.units).then(u),this.units}};var m=class{constructor(){this.filters={}}getFilters(){return document.querySelectorAll(".filters input[type=checkbox]").forEach(e=>{this.filters[e.id]=e.checked}),this.filters}setFilters(e){this.filters[e.id]=e.checked;const t=document.querySelectorAll(`th.${e.id}, td.${e.id}`);e.checked?t.forEach(e=>e.style.display="table-cell"):t.forEach(e=>e.style.display="none");const n=(new d).getUnits(),c=document.querySelector("#city");return r(c.value,n).then(u),this.filters}};document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#city");e.addEventListener("input",l);const t=new m;t.getFilters(),document.querySelectorAll(".filters input[type=checkbox]").forEach(e=>{e.addEventListener("change",e=>{t.setFilters(e.target)})});const n=new d;document.querySelector(".toggleCheck_switch").addEventListener("click",n.setUnits),document.querySelector(".form").addEventListener("submit",()=>{event.preventDefault();const t=n.getUnits();r(e.value,t).then(u)})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZ2V0V2VhdGhlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWJsZS9mb3JtYXREYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYmxlL2dldEljb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGFibGUvcmVuZGVyVGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcmVuZGVyQ2l0eS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy93ZWF0aGVySGFuZGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9mb3JtL3Nob3dFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zd2l0Y2hlci9zd2l0Y2hlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9maWx0ZXJzL2ZpbHRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRXZWF0aGVyIiwiY2l0eSIsInVuaXRzIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwicmVzdWx0IiwiY29kIiwibWVzc2FnZSIsImZvcm1hdE51bWJlciIsIm51bWJlciIsImZvcm1hdERhdGVBbmRUaW1lIiwiZGF0YSIsIm5ld0RhdGUiLCJEYXRlIiwiZGF0ZSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwiaG91ciIsImdldEhvdXJzIiwibWludXRlcyIsImdldE1pbnV0ZXMiLCJnZXRGdWxsWWVhciIsImdldEljb24iLCJ3ZWF0aGVyIiwiaWNvbiIsImRlc2NyaXB0aW9uIiwicmVuZGVyVGFibGUiLCJsaXN0IiwidGFibGVTZWN0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwidGFibGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJmaWx0ZXJzQ2hlY2JveGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImZpbHRlcnMiLCJmb3JFYWNoIiwiY2hlY2tib3giLCJpZCIsImNoZWNrZWQiLCJmaWx0ZXJzVHJ1ZSIsImZpbHRlciIsInB1c2giLCJ0aGVhZCIsInRyIiwidGgiLCJyZW5kZXJUaGVhZCIsInRib2R5IiwiZWxlbWVudCIsImVsZW0iLCJkdF90eHQiLCJ0ZW1wZXJhdHVyZSIsIk1hdGgiLCJyb3VuZCIsIm1haW4iLCJ0ZW1wIiwibWF4VGVtcCIsInRlbXBfbWF4IiwibWluVGVtcCIsInRlbXBfbWluIiwicHJlc3N1cmUiLCJodW1pZGl0eSIsImZlZWxzTGlrZSIsImZlZWxzX2xpa2UiLCJ0ZCIsInJlbmRlclJvd3MiLCJyZW5kZXJDaXR5IiwiaW5uZXJUZXh0IiwiY291bnRyeSIsImNvb3JkIiwibGF0IiwibG9uIiwid2VhdGhlckhhbmRsZXIiLCJ3ZWF0aGVyRGF0YSIsImVycm9yIiwic3R5bGUiLCJvcGFjaXR5Iiwic2hvd0Vycm9yIiwiZXZlbnQiLCJ0YXJnZXQiLCJsZW5ndGgiLCJTd2l0Y2hlciIsImNvbnN0cnVjdG9yIiwidGhpcyIsImdldFVuaXRzIiwic2V0VW5pdHMiLCJjaXR5SW5wdXQiLCJGaWx0ZXJzIiwiZ2V0RmlsdGVycyIsInNldEZpbHRlcnMiLCJjZWxsc0luQ29sdW1uIiwiZGlzcGxheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzd2l0Y2hlciIsInByZXZlbnREZWZhdWx0Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZ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QUFTUSxpQkFBa0IsTUFBSzZDLEVBQU96QyxVQUFVeUMsRUFBT3pDLE1BRTFFeUMsRUFBT3hDLFFBQ1RtRCxFQUFjdEQsUUFBUTRCLEdBQU1BLEVBQUdXLE1BQU1nQixRQUFVLGNBRS9DRCxFQUFjdEQsUUFBUTRCLEdBQU1BLEVBQUdXLE1BQU1nQixRQUFVLFFBSWpELE1BQ00vRixHQURXLElBQUlxRixHQUNFRyxXQUdqQkUsRUFBWTVELFNBQVNDLGNBQWMsU0FJekMsT0FIZ0JqQyxFQUFXNEYsRUFBVTNHLE1BQU9pQixHQUNwQ0UsS0FBSzBFLEdBRU5XLEtBQUtoRCxVQy9CaEJULFNBQVNrRSxpQkFBaUIsbUJBQW9CLEtBRzVDLE1BQU1OLEVBQVk1RCxTQUFTQyxjQUFjLFNBQ3pDMkQsRUFBVU0saUJBQWlCLFFBQVNmLEdBSXBDLE1BQU0xQyxFQUFVLElBQUlvRCxFQUNwQnBELEVBQVFxRCxhQUVpQjlELFNBQVNRLGlCQUFpQixpQ0FDbENFLFFBQVFDLElBQ3ZCQSxFQUFTdUQsaUJBQWlCLFNBQVVkLElBQ2xDM0MsRUFBUXNELFdBQVdYLEVBQU1DLFlBTTdCLE1BQU1jLEVBQVcsSUFBSVosRUFFRXZELFNBQVNDLGNBQWMsdUJBQy9CaUUsaUJBQWlCLFFBQVNDLEVBQVNSLFVBSXJDM0QsU0FBU0MsY0FBYyxTQUMvQmlFLGlCQUFpQixTQUFVLEtBQzlCZCxNQUFNZ0IsaUJBQ04sTUFBTWxHLEVBQVFpRyxFQUFTVCxXQUVQMUYsRUFBVzRGLEVBQVUzRyxNQUFPaUIsR0FDcENFLEtBQUswRSIsImZpbGUiOiJqcy9tYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiLyoqXHJcbiAqIEZldGNoIGRhdGEgZnJvbSBBUEkgYW5kIHJldHVybiBKU09OXHJcbiAqIFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY2l0eSBuYW1lXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1bml0cyBcclxuICovXHJcbmNvbnN0IGdldFdlYXRoZXIgPSAoY2l0eSwgdW5pdHMgPSAnbWV0cmljJykgPT4ge1xyXG5cclxuICBjb25zdCBvcGVuV2VhdGhlckFwaUtleSA9ICc4YTQ4MGQwMTRmYTlkZDNjOTVkOGZiZjQ1MzE4NjlkMyc7IC8vINC80L7QuSDQutC70Y7Rh1xyXG4gIGNvbnN0IHdlYXRoZXJBcGlMaW5rID0gYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD9xPSR7Y2l0eX0mdW5pdHM9JHt1bml0c30mYXBwaWQ9JHtvcGVuV2VhdGhlckFwaUtleX1gO1xyXG5cclxuICByZXR1cm4gZmV0Y2god2VhdGhlckFwaUxpbmspXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICBpZiAocmVzdWx0LmNvZCAmJiByZXN1bHQuY29kID09PSA0MDApIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0Lm1lc3NhZ2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZ2V0V2VhdGhlcjsiLCJjb25zdCBmb3JtYXREYXRlQW5kVGltZSA9IGRhdGEgPT4ge1xyXG5cclxuICBjb25zdCBuZXdEYXRlID0gbmV3IERhdGUoZGF0YSk7XHJcblxyXG4gIGNvbnN0IGRhdGUgPSBmb3JtYXROdW1iZXIobmV3RGF0ZS5nZXREYXRlKCkpO1xyXG4gIGNvbnN0IG1vbnRoID0gZm9ybWF0TnVtYmVyKG5ld0RhdGUuZ2V0TW9udGgoKSArIDEpO1xyXG4gIGNvbnN0IGhvdXIgPSBmb3JtYXROdW1iZXIobmV3RGF0ZS5nZXRIb3VycygpKTtcclxuICBjb25zdCBtaW51dGVzID0gZm9ybWF0TnVtYmVyKG5ld0RhdGUuZ2V0TWludXRlcygpKTtcclxuXHJcbiAgcmV0dXJuIGAke2RhdGV9LyR7bW9udGh9LyR7bmV3RGF0ZS5nZXRGdWxsWWVhcigpfSAke2hvdXJ9OiR7bWludXRlc31gO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0TnVtYmVyKG51bWJlcikge1xyXG4gIHJldHVybiBudW1iZXIgPiA5ID8gbnVtYmVyIDogYDAke251bWJlcn1gO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmb3JtYXREYXRlQW5kVGltZTsiLCJjb25zdCBnZXRJY29uID0gZGF0YSA9PiBgPGltZyBjbGFzcz1cIndlYXRoZXItaW1nXCJcclxuICBzcmM9XCJodHRwczovL29wZW53ZWF0aGVybWFwLm9yZy9pbWcvd24vJHtkYXRhLndlYXRoZXJbMF0uaWNvbn1AMngucG5nXCIgXHJcbiAgYWx0PVwiJHtkYXRhLndlYXRoZXJbMF0uZGVzY3JpcHRpb259XCIgdGl0bGU9XCIke2RhdGEud2VhdGhlclswXS5kZXNjcmlwdGlvbn1cIj5gO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZ2V0SWNvbjsiLCJpbXBvcnQgZm9ybWF0RGF0ZUFuZFRpbWUgZnJvbSBcIi4vZm9ybWF0RGF0ZVwiO1xyXG5pbXBvcnQgZ2V0SWNvbiBmcm9tICcuL2dldEljb24nO1xyXG5cclxuY29uc3QgcmVuZGVyVGFibGUgPSAobGlzdCkgPT4ge1xyXG4gXHJcbiAgLyogY2xlYXIgdGFibGUgd3JhcHBlciAqL1xyXG4gIGNvbnN0IHRhYmxlU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS13cmFwJyk7XHJcbiAgdGFibGVTZWN0aW9uLmlubmVySFRNTCA9ICcnOyAgLy8gY2xlYXIgdGFibGUgc2VjdGlvblxyXG5cclxuICAvKiBjcmVhdGUgbmV3IHRhYmxlICovXHJcbiAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xyXG4gIHRhYmxlLmNsYXNzTmFtZSA9ICd0YWJsZSc7XHJcbiAgdGFibGVTZWN0aW9uLmFwcGVuZENoaWxkKHRhYmxlKTsgXHJcblxyXG5cclxuXHJcbiAgLyogY3JlYXRlIGZpbHRlcnMgb2JqZWN0ICovXHJcbiAgY29uc3QgZmlsdGVyc0NoZWNib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzIGlucHV0W3R5cGU9Y2hlY2tib3hdJyk7XHJcbiAgbGV0IGZpbHRlcnMgPSB7fTtcclxuICBmaWx0ZXJzQ2hlY2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG4gICAgZmlsdGVyc1tjaGVja2JveC5pZF0gPSBjaGVja2JveC5jaGVja2VkO1xyXG4gIH0pO1xyXG5cclxuICAvKiBjcmVhdGUgYW4gYXJyYXkgb2YgZmlsdGVycyB3aG9zZSBzdGF0dXMgaXMgdHJ1ZSAqL1xyXG4gIGNvbnN0IGZpbHRlcnNUcnVlID0gW11cclxuICBmb3IgKGNvbnN0IGtleSBpbiBmaWx0ZXJzKSB7XHJcbiAgICBpZiAoZmlsdGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGZpbHRlcnNba2V5XSA9PT0gdHJ1ZSkge1xyXG4gICAgICBjb25zdCBmaWx0ZXIgPSBrZXk7XHJcbiAgICAgIGZpbHRlcnNUcnVlLnB1c2goZmlsdGVyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlclRoZWFkKGZpbHRlcnNUcnVlKTtcclxuXHJcbiAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xyXG4gIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcclxuICB0Ym9keS5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgbGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4gcmVuZGVyUm93cyhlbGVtZW50LCBmaWx0ZXJzVHJ1ZSkpO1xyXG5cclxuXHJcblxyXG4gIC8qIGNyZWF0ZSBhbmQgZmlsbCB0aGVhZCB3aXRoIGZpbHRlcnMgKi9cclxuICBmdW5jdGlvbiByZW5kZXJUaGVhZChmaWx0ZXJzVHJ1ZSkge1xyXG5cclxuICAgIGNvbnN0IHRoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcclxuXHJcbiAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICB0ci5pbm5lckhUTUwgPSBgXHJcbiAgICA8dGg+RGF0ZS9UaW1lPC90aD5cclxuICAgIDx0aCBjbGFzcz1cIndlYXRoZXJcIj5XZWF0aGVyPC90aD5gO1xyXG5cclxuICAgIGZpbHRlcnNUcnVlLmZvckVhY2goZmlsdGVyID0+IHtcclxuXHJcbiAgICAgIGNvbnN0IHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcclxuICAgICAgdGguY2xhc3NOYW1lID0gZmlsdGVyO1xyXG5cclxuICAgICAgc3dpdGNoIChmaWx0ZXIpIHtcclxuICAgICAgICBjYXNlICd0ZW1wZXJhdHVyZSc6XHJcbiAgICAgICAgICB0aC5pbm5lckhUTUwgPSAnVGVtcGVyYXR1cmUnO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnbWF4LXRlbXAnOlxyXG4gICAgICAgICAgdGguaW5uZXJIVE1MID0gJ01heCBUZW1wLic7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdtaW4tdGVtcCc6XHJcbiAgICAgICAgICB0aC5pbm5lckhUTUwgPSAnTWluIFRlbXAuJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3ByZXNzdXJlJzpcclxuICAgICAgICAgIHRoLmlubmVySFRNTCA9ICdQcmVzc3VyZSc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdodW1pZGl0eSc6XHJcbiAgICAgICAgICB0aC5pbm5lckhUTUwgPSAnSHVtaWRpdHknO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnZmVlbHMtbGlrZSc6XHJcbiAgICAgICAgICB0aC5pbm5lckhUTUwgPSAnRmVlbHMgbGlrZSc7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHRyLmFwcGVuZENoaWxkKHRoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0aGVhZC5hcHBlbmRDaGlsZCh0cik7XHJcbiAgICB0YWJsZS5hcHBlbmRDaGlsZCh0aGVhZCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyogY3JlYXRlIGFuZCBmaWxsIHJvd3MgaW4gdGJvZHkgd2l0aCBmaWx0ZXJzICovXHJcbiAgZnVuY3Rpb24gcmVuZGVyUm93cyhlbGVtLCBmaWx0ZXJzVHJ1ZSkge1xyXG5cclxuICAgIGNvbnN0IGRhdGUgPSBmb3JtYXREYXRlQW5kVGltZShlbGVtLmR0X3R4dCk7XHJcbiAgICBjb25zdCBpY29uID0gZ2V0SWNvbihlbGVtKTtcclxuICAgIGNvbnN0IHRlbXBlcmF0dXJlID0gTWF0aC5yb3VuZChlbGVtLm1haW4udGVtcCk7XHJcbiAgICBjb25zdCBtYXhUZW1wID0gTWF0aC5yb3VuZChlbGVtLm1haW4udGVtcF9tYXgpO1xyXG4gICAgY29uc3QgbWluVGVtcCA9IE1hdGgucm91bmQoZWxlbS5tYWluLnRlbXBfbWluKTtcclxuICAgIGNvbnN0IHByZXNzdXJlID0gZWxlbS5tYWluLnByZXNzdXJlO1xyXG4gICAgY29uc3QgaHVtaWRpdHkgPSBlbGVtLm1haW4uaHVtaWRpdHk7XHJcbiAgICBjb25zdCBmZWVsc0xpa2UgPSBNYXRoLnJvdW5kKGVsZW0ubWFpbi5mZWVsc19saWtlKTtcclxuXHJcblxyXG4gICAgLy8gY3JlYXRlIG5ldyB0YWJsZSByb3dcclxuICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgIHRyLmlubmVySFRNTCA9IGBcclxuICAgIDx0ZD4ke2RhdGV9PC90ZD5cclxuICAgIDx0ZCBjbGFzcz1cIndlYXRoZXJcIj4ke2ljb259PC90ZD5gO1xyXG5cclxuXHJcbiAgICBmaWx0ZXJzVHJ1ZS5mb3JFYWNoKGZpbHRlciA9PiB7XHJcblxyXG4gICAgICBjb25zdCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgIHRkLmNsYXNzTmFtZSA9IGZpbHRlcjtcclxuICAgICAgdGQuaW5uZXJIVE1MID0gZmlsdGVyO1xyXG4gICAgICBcclxuICAgICAgc3dpdGNoIChmaWx0ZXIpIHtcclxuICAgICAgICBjYXNlICd0ZW1wZXJhdHVyZSc6XHJcbiAgICAgICAgICB0ZC5pbm5lckhUTUwgPSB0ZW1wZXJhdHVyZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ21heC10ZW1wJzpcclxuICAgICAgICAgIHRkLmlubmVySFRNTCA9IG1heFRlbXA7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdtaW4tdGVtcCc6XHJcbiAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBtaW5UZW1wO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncHJlc3N1cmUnOlxyXG4gICAgICAgICAgdGQuaW5uZXJIVE1MID0gcHJlc3N1cmU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdodW1pZGl0eSc6XHJcbiAgICAgICAgICB0ZC5pbm5lckhUTUwgPSBodW1pZGl0eTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2ZlZWxzLWxpa2UnOlxyXG4gICAgICAgICAgdGQuaW5uZXJIVE1MID0gZmVlbHNMaWtlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJlbmRlclRhYmxlOyIsIi8qKlxyXG4gKiBzaG93IGNpdHksIGxhdGl0dWRlIGFuZCBsb25naXR1ZGVcclxuICogQHBhcmFtIHtqc29ufSBkYXRhIGZyb20gQVBJXHJcbiAqL1xyXG5jb25zdCByZW5kZXJDaXR5ID0gZGF0YSA9PiB7XHJcblxyXG4gIGNvbnN0IGNpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2l0eV90aXRsZScpO1xyXG4gIGNpdHkuaW5uZXJUZXh0ID0gYCR7ZGF0YS5jaXR5Lm5hbWV9LCAke2RhdGEuY2l0eS5jb3VudHJ5fWA7XHJcblxyXG4gIGNvbnN0IGxhdGl0dWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xhdGl0dWRlJyk7XHJcbiAgbGF0aXR1ZGUuaW5uZXJUZXh0ID0gZGF0YS5jaXR5LmNvb3JkLmxhdDtcclxuXHJcbiAgY29uc3QgbG9uZ2l0dWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvbmdpdHVkZScpO1xyXG4gIGxvbmdpdHVkZS5pbm5lclRleHQgPSBkYXRhLmNpdHkuY29vcmQubG9uO1xyXG4gIFxyXG59O1xyXG5leHBvcnQgZGVmYXVsdCByZW5kZXJDaXR5OyIsImltcG9ydCByZW5kZXJUYWJsZSBmcm9tIFwiLi90YWJsZS9yZW5kZXJUYWJsZVwiO1xyXG5pbXBvcnQgcmVuZGVyQ2l0eSBmcm9tIFwiLi9yZW5kZXJDaXR5XCI7XHJcblxyXG4vKipcclxuICogU2hvdyBlcnJvciBtZXNzYWdlLCBjaXR5IGRhdGEgYW5kIHJlbmRlciB3ZWF0aGVyIHRhYmxlXHJcbiAqIEBwYXJhbSB7anNvbn0gd2VhdGhlckRhdGEgZnJvbSBBUElcclxuICovXHJcbmNvbnN0IHdlYXRoZXJIYW5kbGVyID0gd2VhdGhlckRhdGEgPT4ge1xyXG5cclxuICAvKiBzaG93IGVycm9yIG1lc3NhZ2UgaWYgQVBJIHJldHVybiBlcnJvciAqL1xyXG4gIGNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVycm9yJyk7XHJcbiAgaWYgKHdlYXRoZXJEYXRhLm1lc3NhZ2UgIT09IDApIHtcclxuICAgIGVycm9yLmlubmVyVGV4dCA9IHdlYXRoZXJEYXRhLm1lc3NhZ2U7XHJcbiAgICBlcnJvci5zdHlsZS5vcGFjaXR5ID0gMTtcclxuICAgIHJldHVybjtcclxuICB9IGVsc2Uge1xyXG4gICAgZXJyb3Iuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgfVxyXG5cclxuICBjb25zdCBkYXRhID0gd2VhdGhlckRhdGE7XHJcbiAgXHJcbiAgcmVuZGVyQ2l0eShkYXRhKTtcclxuICByZW5kZXJUYWJsZShkYXRhLmxpc3QpO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2VhdGhlckhhbmRsZXI7IiwiY29uc3Qgc2hvd0Vycm9yID0gZXZlbnQgPT4ge1xyXG5cclxuICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXJyb3InKTtcclxuXHJcbiAgaWYgKHRhcmdldC52YWx1ZS5sZW5ndGggPT09IDApIHtcclxuICAgIGVycm9yLmlubmVyVGV4dCA9ICd0aGUgZmllbGQgbXVzdCBub3QgYmUgZW1wdHknO1xyXG4gICAgZXJyb3Iuc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgfSBlbHNlIHtcclxuICAgIGVycm9yLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG4gIH1cclxufTtcclxuZXhwb3J0IGRlZmF1bHQgc2hvd0Vycm9yOyIsImltcG9ydCBnZXRXZWF0aGVyIGZyb20gXCIuLi9nZXRXZWF0aGVyXCI7XHJcbmltcG9ydCB3ZWF0aGVySGFuZGxlciBmcm9tIFwiLi4vd2VhdGhlckhhbmRsZXJcIjtcclxuXHJcbmNsYXNzIFN3aXRjaGVyIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMudW5pdHMgPSAnbWV0cmljJztcclxuICB9XHJcblxyXG4gIGdldFVuaXRzKCkge1xyXG4gICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdW5pdHMnKTtcclxuICAgIGlmIChjaGVja2JveCAmJiBjaGVja2JveC5jaGVja2VkKSB7XHJcbiAgICAgIHRoaXMudW5pdHMgPSAnaW1wZXJpYWwnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy51bml0cyA9ICdtZXRyaWMnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMudW5pdHM7XHJcbiAgfVxyXG5cclxuICBzZXRVbml0cygpIHtcclxuICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VuaXRzJyk7XHJcbiAgICAvLyBjbGljayBjaGVja2luZyB1bnV0c1xyXG4gICAgaWYgKGNoZWNrYm94ICYmICFjaGVja2JveC5jaGVja2VkKSB7XHJcbiAgICAgIHRoaXMudW5pdHMgPSAnaW1wZXJpYWwnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy51bml0cyA9ICdtZXRyaWMnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldCBkYXRhIEFQSSBhbmQgcmVuZGVyIHJlc3VsdFxyXG4gICAgY29uc3QgY2l0eUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NpdHknKTtcclxuICAgIGNvbnN0IHdlYXRoZXIgPSBnZXRXZWF0aGVyKGNpdHlJbnB1dC52YWx1ZSwgdGhpcy51bml0cyk7XHJcbiAgICB3ZWF0aGVyLnRoZW4od2VhdGhlckhhbmRsZXIpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLnVuaXRzO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU3dpdGNoZXI7IiwiaW1wb3J0IGdldFdlYXRoZXIgZnJvbSBcIi4uL2dldFdlYXRoZXJcIjtcclxuaW1wb3J0IHdlYXRoZXJIYW5kbGVyIGZyb20gXCIuLi93ZWF0aGVySGFuZGxlclwiO1xyXG5pbXBvcnQgU3dpdGNoZXIgZnJvbSBcIi4uL3N3aXRjaGVyL3N3aXRjaGVyXCI7XHJcblxyXG5jbGFzcyBGaWx0ZXJzIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZmlsdGVycyA9IHt9O1xyXG4gIH1cclxuICBcclxuXHJcbiAgZ2V0RmlsdGVycygpIHtcclxuICAgIGNvbnN0IGZpbHRlcnNDaGVjYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVycyBpbnB1dFt0eXBlPWNoZWNrYm94XScpO1xyXG4gICAgZmlsdGVyc0NoZWNib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcclxuICAgICAgdGhpcy5maWx0ZXJzW2NoZWNrYm94LmlkXSA9IGNoZWNrYm94LmNoZWNrZWQ7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLmZpbHRlcnM7XHJcbiAgfVxyXG5cclxuICBzZXRGaWx0ZXJzKHRhcmdldCkge1xyXG4gICAgdGhpcy5maWx0ZXJzW3RhcmdldC5pZF0gPSB0YXJnZXQuY2hlY2tlZDtcclxuXHJcbiAgICBjb25zdCBjZWxsc0luQ29sdW1uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgdGguJHt0YXJnZXQuaWR9LCB0ZC4ke3RhcmdldC5pZH1gKTtcclxuXHJcbiAgICBpZiAodGFyZ2V0LmNoZWNrZWQpIHtcclxuICAgICAgY2VsbHNJbkNvbHVtbi5mb3JFYWNoKHRkID0+IHRkLnN0eWxlLmRpc3BsYXkgPSAndGFibGUtY2VsbCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2VsbHNJbkNvbHVtbi5mb3JFYWNoKHRkID0+IHRkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIGNoZWNrIHVuaXRzICovXHJcbiAgICBjb25zdCBzd2l0Y2hlciA9IG5ldyBTd2l0Y2hlcigpO1xyXG4gICAgY29uc3QgdW5pdHMgPSBzd2l0Y2hlci5nZXRVbml0cygpO1xyXG5cclxuICAgIC8qIGdldCBkYXRhICovXHJcbiAgICBjb25zdCBjaXR5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2l0eScpO1xyXG4gICAgY29uc3Qgd2VhdGhlciA9IGdldFdlYXRoZXIoY2l0eUlucHV0LnZhbHVlLCB1bml0cyk7XHJcbiAgICB3ZWF0aGVyLnRoZW4od2VhdGhlckhhbmRsZXIpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gdGhpcy5maWx0ZXJzO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRmlsdGVyczsiLCJpbXBvcnQgJy4vc2Nzcy9zdHlsZS5zY3NzJztcclxuaW1wb3J0IGdldFdlYXRoZXIgZnJvbSAnLi9jb21wb25lbnRzL2dldFdlYXRoZXInO1xyXG5pbXBvcnQgd2VhdGhlckhhbmRsZXIgZnJvbSAnLi9jb21wb25lbnRzL3dlYXRoZXJIYW5kbGVyJztcclxuaW1wb3J0IHNob3dFcnJvciBmcm9tICcuL2NvbXBvbmVudHMvZm9ybS9zaG93RXJyb3InO1xyXG5pbXBvcnQgRmlsdGVycyBmcm9tICcuL2NvbXBvbmVudHMvZmlsdGVycy9maWx0ZXJzJztcclxuaW1wb3J0IFN3aXRjaGVyIGZyb20gJy4vY29tcG9uZW50cy9zd2l0Y2hlci9zd2l0Y2hlcic7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG5cclxuICAvLyBTaG93IGVycm9yIGlmIGlucHV0IGFyZSBlbXB0eVxyXG4gIGNvbnN0IGNpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaXR5Jyk7XHJcbiAgY2l0eUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgc2hvd0Vycm9yKTtcclxuXHJcbiAgXHJcbiAgLy8gZmlsdGVyc1xyXG4gIGNvbnN0IGZpbHRlcnMgPSBuZXcgRmlsdGVycygpO1xyXG4gIGZpbHRlcnMuZ2V0RmlsdGVycygpO1xyXG5cclxuICBjb25zdCBmaWx0ZXJzQ2hlY2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpbHRlcnMgaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcclxuICBmaWx0ZXJzQ2hlY2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG4gICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZXZlbnQgPT4ge1xyXG4gICAgICBmaWx0ZXJzLnNldEZpbHRlcnMoZXZlbnQudGFyZ2V0KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgLy8gZXZlbnQgdG9nZ2xlIHN3aXRjaGVyXHJcbiAgY29uc3Qgc3dpdGNoZXIgPSBuZXcgU3dpdGNoZXIoKTtcclxuXHJcbiAgY29uc3Qgc3dpdGNoZXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9nZ2xlQ2hlY2tfc3dpdGNoJyk7XHJcbiAgc3dpdGNoZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzd2l0Y2hlci5zZXRVbml0cyk7XHJcblxyXG5cclxuICAvLyBldmVudCBzdWJtaXQgZm9ybVxyXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IHVuaXRzID0gc3dpdGNoZXIuZ2V0VW5pdHMoKTtcclxuXHJcbiAgICBjb25zdCB3ZWF0aGVyID0gZ2V0V2VhdGhlcihjaXR5SW5wdXQudmFsdWUsIHVuaXRzKTtcclxuICAgIHdlYXRoZXIudGhlbih3ZWF0aGVySGFuZGxlcik7XHJcbiAgfSk7XHJcblxyXG59KTsiXSwic291cmNlUm9vdCI6IiJ9